<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>../ADC-citation-project - Loader Table Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.28/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Loader Table Workflow</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This quarto document describes processing and quality assurance steps used to convert CDFW data into the format needed for ingest into vegbank. Each loader table has a function in the family <code>[table]_loader</code> which is run on input data and generates output files at the desired location. Messages from the loader functions indicate potential issues with input datasets.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>in_dir <span class="ot">&lt;-</span> <span class="st">'/var/data/curation/vegbank/'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>out_dir <span class="ot">&lt;-</span> <span class="st">'data/loader-tables'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="projects" class="level2">
<h2 class="anchored" data-anchor-id="projects">Projects</h2>
<p>Project loader table data is extracted from <code>RAProjects</code> files.</p>
<p>The project start and stop dates are converted from date-time formats to date formats (dropping the time). Date values are checked to ensure they are reasonable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">project_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Processing 3 people/contributor tables from:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_NonStandardDatasets_Submission3_20260121/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets1_RAReleve_20250915/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets2_AARecon_20251204/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output to: data/loader-tables/projectLT.csv</code></pre>
</div>
</div>
</section>
<section id="party-and-contributor" class="level2">
<h2 class="anchored" data-anchor-id="party-and-contributor">Party and Contributor</h2>
<p>The two loader tables for Party and Contributor are both extracted from <code>RAProjects</code> files.</p>
<p>The source data is normalized, moving from wide to long format so that each individual in <code>DataContact*{n}</code> columns is in their own row. Emails are checked to ensure they appear valid. Names are then split using whitespace into <code>given_name</code>, <code>middle_name</code>, and <code>sur_name</code>. Unique party codes are generated for each individual (<code>user_py_code</code>). Additionally, all unique individuals already in vegbank are retrieved, along with their project codes. Individuals in the source data are matched to existing vegbank parties, and if any are found the existing vegbank identifier is assigned to <code>vb_py_code</code>.</p>
<p><code>role</code> (a vegbank code starting with <code>ar.</code>) is derived from the <code>DataContactRole{n}</code> columns, which are free text. These values are standardized and mapped to VegBank role codes using a lookup table. The full mapping used in this process is shown below for transparency and review. If no role is found in the source data, the code ar.46 is assigned. The contributor_type field is given a value of “Project” for all rows.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-37b6f21df31f7a972271" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-37b6f21df31f7a972271">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["an author of classification report","an author of the vegetation classification","an author on the report, managed the accuracy assessment fieldwork","author of dataset","collected and analyzed data for masters thesis","first author on the vegetation classification","lead author of dataset","lead author on classification report","oversaw fieldwork, lead author","vegetation classification and co-author","classification","classification lead for the project.","classifier","classifier and writer of descriptions","contractor, surveyor, and classification lead","ecologist, completed field sampling and classification","gis analyst and lead photointerpreter","senior biologist during the time of the project. cdfw performed ras and releves, and classified them","vegcamp program lead, project photointerpreter","co-pi, and botany authority","consultant","senior biological consultant","data contact, environmental scientist","prinicpal contact for aecom","project contact","data coordinator","data management","data manager","data processor","data steward, gis specialist","analyzed the plots for the project. was the contractor's project lead","gic used these surveys and classification of them to map the area.","gis analyst","obtained data for cnps","receiver of data","biological science technician (botany)","collector of majority of deer creek hills data","cooperator, and field lead","field coordinator and data collector","field lead","field lead and data entry person","field manager for cnps at the time of rapid assessments","field manager for nps during accuracy assessment","field staff and mapper","lead biologist interpreter","nps lead and data collector","obtained data","primary surveyor","provided student workers","regional biologist who helped with field effort","surveyor","funding agency, land access, private land contacts","california native plant program","planning",null,"one of the principal investigators on the project","primary mapper and one of the principal investigators on the project","principal investigator","principal investigator/author","senior scientist","vegetation program lead and primary investigator","associate vegetation ecologist","associate wildlife biologist, land program - north, eastern sierra - inland deserts region","environmental scientist / vegetation ecologist","environmental scientist/ vegetation ecologist","environmental scientist/vegetation ecologist","lead biologist for vegcamp","lead ecologist","plot author","primary data collector","project ecologist","project ecologist, trainer, cnps vegetation lead","restoration ecologist","vegcamp lead","vegcamp lead biologist","vegetation ecologist","vegetation ecologist; data collection, supervision of vegetation mapping","advisor","previously botanist at deva, now with usfs in bishop, ca","regional biologist who met with us on reviving project","research advisor","senior biologist","senior environmental scientist","sfan i &amp; m natural resource specialist","cnps vegetation program","collected additional data for the project and managed data entry for their surveys","field survey coordinator, and project lead for cnps (now works for cdfw)","funder","land resources manager","managed field crew and database entry for the project","program director","program lead","project lead","project management","project manager","project manager, including mainting sub-contract with prunske-chattam for surveying","project steward","regional lead","vegetation program director","vegetation program lead","vegetation program lead for cnps","wildland vegetation program manager"],["Author","Author","Author","Author","Author","Author","Author","Author","Author","Author","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Co-PI","Consultant","Consultant","Contact","Contact","Contact","Data Manager","Data Manager","Data Manager","Data Manager","Data Manager","Data aggregator","Data aggregator","Data aggregator","Data aggregator","Data aggregator","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Land owner","Not specified","Not specified","Not specified/Unknown","PI","PI","PI","PI","PI","PI","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager"],["ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.38","ar.40","ar.40","ar.17","ar.17","ar.17","ar.19","ar.19","ar.19","ar.19","ar.19","ar.56","ar.56","ar.56","ar.56","ar.56","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.45","ar.46","ar.46","ar.47","ar.18","ar.18","ar.18","ar.18","ar.18","ar.18","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.53","ar.53","ar.53","ar.53","ar.53","ar.53","ar.53","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>ContactRole<\/th>\n      <th>role_name<\/th>\n      <th>ar_code<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"autoWidth":true,"scrollX":true,"columnDefs":[],"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">party_contributor_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Processing 3 people/contributor tables from:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_NonStandardDatasets_Submission3_20260121/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets1_RAReleve_20250915/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets2_AARecon_20251204/RAProjects.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some email addresses appear to be invalid: retired, not found in NPS directory</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing two output files to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/partyLT.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/contributorLT.csv</code></pre>
</div>
</div>
</section>
<section id="disturbance" class="level2">
<h2 class="anchored" data-anchor-id="disturbance">Disturbance</h2>
<p>Disturbance data is extracted from <code>RAImpacts.csv</code> files, as well as the <code>LImpacts.csv</code> lookup table.</p>
<p>Intensity values are checked to ensure they are either 1, 2, or 3, and then these values are converted to low, medium, and high, respectively. Unknown intensity values are left as <code>NA</code>. Unknown values in the <code>CodeImpact</code> field not present in the impacts lookup table are identified. These values are converted to <code>NA</code> in the <code>disturbance_type</code> field. Disturbance age and extent are not present in the CDFW data so are set to <code>NA</code> for all rows in the loader table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disturbance_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Processing 3 disturbance tables from:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_NonStandardDatasets_Submission3_20260121/RAImpacts.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets1_RAReleve_20250915/RAImpacts.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets2_AARecon_20251204/RAImpacts.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Unknown intensity values were found:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 999</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 35</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 52</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 9</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! The following impact codes were missing from the impacts lookup table:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 71</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 39</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/disturbanceLT.csv</code></pre>
</div>
</div>
</section>
<section id="plots" class="level2">
<h2 class="anchored" data-anchor-id="plots">Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plots_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! There are 873 rows with missing location information.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some values in the PlotArea column were not able to be converted to numbers. Here is a sample of some of the 72 unique values:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>15%, 65%, 20%, 80%, 75%, 30%, Entire Polygon, 70%, 10%, 50%, 35%, 90%, 60%,
40%, 25%, Other (please type in), 55%, 85%, …, 67%, and 80 %</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some rows have a PlotShape value, but no PlotArea. This affects rows with the following SurveyIds (687 rows): ANZA197, ANZA198, ANZA199, ANZA200, ANZA201, ANZA202, ANZA203, ANZA204, ANZA205, ANZA206, ANZA154, ANZA155, ANZA156, ANZA157, ANZA158, ANZA159, ANZA160, ANZA161, …, MPEN001, and SCRUZ586</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some rows have a PlotArea value, but no PlotShape This affects rows with the following SurveyIds (499 rows): CANO030, COYO064, EBAY0036, I05141020A, I05141210, I05141320A, MOJA0326, MOJCH001, N1403251426, N1403251442, N1403251602, N1403251609, N1403251631, N1403251641, N1403251652, N1403251704, N1403251726, N1403251750, …, PORE104, and 1A05916</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some percent rock gravel values are greater than 100. Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some tree cover values (8 rows) are greater than 100. Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some Conif_ht2 values were not able to be converted to numeric (7 rows). Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some Hdwd_ht2 values were not able to be converted to numeric (9 rows). Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/plotsLT.csv</code></pre>
</div>
</div>
</section>
<section id="soils" class="level2">
<h2 class="anchored" data-anchor-id="soils">Soils</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">soil_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Processing 3 soil tables from:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_NonStandardDatasets_Submission3_20260121/RAPlots.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets1_RAReleve_20250915/RAPlots.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>•
/var/data/curation/vegbank//VegBankProject_StdDatasets2_AARecon_20251204/RAPlots.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)
One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/soilLT.csv</code></pre>
</div>
</div>
</section>
<section id="community" class="level2">
<h2 class="anchored" data-anchor-id="community">Community</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">community_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! cacode_map has duplicate CaCode values (45 codes). Mapping may be ambiguous.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample duplicates:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>- 21.310.00- 32.037.00- 33.020.00- 35.110.00- 35.111.00- 35.150.00- 35.310.00-
36.310.00- 36.400.00- 37.070.00</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some CaCode values map to multiple NVC codes in cacode_map (45 CaCodes). Using the first NVC code for now to avoid row duplication.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>- 21.310.00- 32.037.00- 33.020.00- 35.110.00- 35.111.00- 35.150.00- 35.310.00-
36.310.00- 36.400.00- 37.070.00</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! vb_cc_code is NA for 14279 rows (out of 30468).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/communityClassificationsLT.csv</code></pre>
</div>
</div>
</section>
<section id="strata-cover-taxonomy" class="level2">
<h2 class="anchored" data-anchor-id="strata-cover-taxonomy">Strata, Cover, Taxonomy</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stratacover_taxon_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! 5629 rows have NA values for `user_py_code`. A person and role are required for the taxon interpretations loader table.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! 12114 rows have NA values for the vegbank plant concept code (`pc_code`). A plant concept code is required for ingest into vegbank.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing two output files to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/strataCoverLT.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• data/loader-tables/taxonInterpretationsLT.csv</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>
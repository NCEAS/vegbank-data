<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Loader Table Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="loader_workflow_files/libs/clipboard/clipboard.min.js"></script>
<script src="loader_workflow_files/libs/quarto-html/quarto.js"></script>
<script src="loader_workflow_files/libs/quarto-html/popper.min.js"></script>
<script src="loader_workflow_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="loader_workflow_files/libs/quarto-html/anchor.min.js"></script>
<link href="loader_workflow_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="loader_workflow_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="loader_workflow_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="loader_workflow_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="loader_workflow_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="loader_workflow_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="loader_workflow_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="loader_workflow_files/libs/datatables-binding-0.28/datatables.js"></script>
<script src="loader_workflow_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="loader_workflow_files/libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="loader_workflow_files/libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="loader_workflow_files/libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="loader_workflow_files/libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="loader_workflow_files/libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="loader_workflow_files/libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="loader_workflow_files/libs/selectize-0.12.0/selectize.min.js"></script>
<link href="loader_workflow_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="loader_workflow_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="loader_workflow_files/libs/font-awesome-6.7.2/js/script.js"></script>


<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#projects" id="toc-projects" class="nav-link" data-scroll-target="#projects"><span class="toc-section-number">2</span>  Projects</a></li>
  <li><a href="#party-and-contributor" id="toc-party-and-contributor" class="nav-link" data-scroll-target="#party-and-contributor"><span class="toc-section-number">3</span>  Party and Contributor</a></li>
  <li><a href="#disturbance" id="toc-disturbance" class="nav-link" data-scroll-target="#disturbance"><span class="toc-section-number">4</span>  Disturbance</a>
  <ul class="collapse">
  <li><a href="#data-sources-and-merging" id="toc-data-sources-and-merging" class="nav-link" data-scroll-target="#data-sources-and-merging"><span class="toc-section-number">4.1</span>  Data Sources and Merging</a></li>
  </ul></li>
  <li><a href="#plots" id="toc-plots" class="nav-link" data-scroll-target="#plots"><span class="toc-section-number">5</span>  Plots</a>
  <ul class="collapse">
  <li><a href="#data-sources-and-initial-merging" id="toc-data-sources-and-initial-merging" class="nav-link" data-scroll-target="#data-sources-and-initial-merging"><span class="toc-section-number">5.1</span>  Data Sources and Initial Merging</a></li>
  <li><a href="#coordinate-standardization-and-location-assignment" id="toc-coordinate-standardization-and-location-assignment" class="nav-link" data-scroll-target="#coordinate-standardization-and-location-assignment"><span class="toc-section-number">5.2</span>  Coordinate Standardization and Location Assignment</a></li>
  <li><a href="#elevation-and-location-accuracy" id="toc-elevation-and-location-accuracy" class="nav-link" data-scroll-target="#elevation-and-location-accuracy"><span class="toc-section-number">5.3</span>  Elevation and Location Accuracy</a></li>
  <li><a href="#plot-area-and-shape" id="toc-plot-area-and-shape" class="nav-link" data-scroll-target="#plot-area-and-shape"><span class="toc-section-number">5.4</span>  Plot Area and Shape</a></li>
  <li><a href="#slope-and-aspect" id="toc-slope-and-aspect" class="nav-link" data-scroll-target="#slope-and-aspect"><span class="toc-section-number">5.5</span>  Slope and Aspect</a></li>
  <li><a href="#substrate-cover-rock-and-gravel" id="toc-substrate-cover-rock-and-gravel" class="nav-link" data-scroll-target="#substrate-cover-rock-and-gravel"><span class="toc-section-number">5.6</span>  Substrate Cover (Rock and Gravel)</a></li>
  <li><a href="#vegetation-height-classes" id="toc-vegetation-height-classes" class="nav-link" data-scroll-target="#vegetation-height-classes"><span class="toc-section-number">5.7</span>  Vegetation Height Classes</a></li>
  <li><a href="#tree-growth-form-assignment" id="toc-tree-growth-form-assignment" class="nav-link" data-scroll-target="#tree-growth-form-assignment"><span class="toc-section-number">5.8</span>  Tree Growth Form Assignment</a></li>
  <li><a href="#topographic-position" id="toc-topographic-position" class="nav-link" data-scroll-target="#topographic-position"><span class="toc-section-number">5.9</span>  Topographic Position</a></li>
  </ul></li>
  <li><a href="#community" id="toc-community" class="nav-link" data-scroll-target="#community"><span class="toc-section-number">6</span>  Community</a>
  <ul class="collapse">
  <li><a href="#data-sources-and-merging-1" id="toc-data-sources-and-merging-1" class="nav-link" data-scroll-target="#data-sources-and-merging-1"><span class="toc-section-number">6.1</span>  Data Sources and Merging</a></li>
  <li><a href="#standardized-classification-methods" id="toc-standardized-classification-methods" class="nav-link" data-scroll-target="#standardized-classification-methods"><span class="toc-section-number">6.2</span>  Standardized Classification Methods</a></li>
  <li><a href="#class-confidence" id="toc-class-confidence" class="nav-link" data-scroll-target="#class-confidence"><span class="toc-section-number">6.3</span>  Class Confidence</a></li>
  <li><a href="#community-concept-matching" id="toc-community-concept-matching" class="nav-link" data-scroll-target="#community-concept-matching"><span class="toc-section-number">6.4</span>  Community Concept Matching</a></li>
  </ul></li>
  <li><a href="#strata-cover-taxonomy" id="toc-strata-cover-taxonomy" class="nav-link" data-scroll-target="#strata-cover-taxonomy"><span class="toc-section-number">7</span>  Strata, Cover, Taxonomy</a>
  <ul class="collapse">
  <li><a href="#data-sources-and-merging-2" id="toc-data-sources-and-merging-2" class="nav-link" data-scroll-target="#data-sources-and-merging-2"><span class="toc-section-number">7.1</span>  Data Sources and Merging</a></li>
  <li><a href="#person-assignment-for-taxonomic-interpretations" id="toc-person-assignment-for-taxonomic-interpretations" class="nav-link" data-scroll-target="#person-assignment-for-taxonomic-interpretations"><span class="toc-section-number">7.2</span>  Person Assignment for Taxonomic Interpretations</a></li>
  <li><a href="#plant-concept-matching" id="toc-plant-concept-matching" class="nav-link" data-scroll-target="#plant-concept-matching"><span class="toc-section-number">7.3</span>  Plant Concept Matching</a></li>
  <li><a href="#strata-identification-and-standardization" id="toc-strata-identification-and-standardization" class="nav-link" data-scroll-target="#strata-identification-and-standardization"><span class="toc-section-number">7.4</span>  Strata Identification and Standardization</a></li>
  </ul></li>
  <li><a href="#new-community-concepts" id="toc-new-community-concepts" class="nav-link" data-scroll-target="#new-community-concepts"><span class="toc-section-number">8</span>  New Community Concepts</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Loader Table Workflow</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>This quarto document describes processing and quality assurance steps used to convert CDFW data into the format needed for ingest into vegbank. Each loader table has a function in the family <code>[table]_loader</code> which is run on input data and generates output files at the desired location. Messages from the loader functions indicate potential issues with input datasets.</p>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>in_dir <span class="ot">&lt;-</span> <span class="st">'/var/data/curation/vegbank/'</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>out_dir <span class="ot">&lt;-</span> <span class="st">'../data/loader-tables'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="projects" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="projects"><span class="header-section-number">2</span> Projects</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">project_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output to: ../data/loader-tables/projectLT.csv</code></pre>
</div>
</div>
<p>Project loader table data is extracted from <code>RAProjects</code> files.</p>
<p>The project start and stop dates are converted from date-time formats to date formats (dropping the time). Date values are checked to ensure they are reasonable.</p>
</section>
<section id="party-and-contributor" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="party-and-contributor"><span class="header-section-number">3</span> Party and Contributor</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">party_contributor_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some email addresses appear to be invalid: retired, not found in NPS directory</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing two output files to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/partyLT.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/contributorLT.csv</code></pre>
</div>
</div>
<p>The two loader tables for Party and Contributor are both extracted from <code>RAProjects</code> files.</p>
<p>The source data is normalized, moving from wide to long format so that each individual in <code>DataContact*{n}</code> columns is in their own row. Emails are checked to ensure they appear valid. Names are then split using whitespace into <code>given_name</code>, <code>middle_name</code>, and <code>sur_name</code>. Unique party codes are generated for each individual (<code>user_py_code</code>). Additionally, all unique individuals already in vegbank are retrieved, along with their project codes. Individuals in the source data are matched to existing vegbank parties, and if any are found the existing vegbank identifier is assigned to <code>vb_py_code</code>.</p>
<p><code>role</code> (a vegbank code starting with <code>ar.</code>) is derived from the <code>DataContactRole{n}</code> columns, which are free text. These values are standardized and mapped to VegBank role codes using a lookup table. The full mapping used in this process is shown below for transparency and review. If no role is found in the source data, the code ar.46 is assigned. The <code>contributor_type</code> field is given a value of “Project” for all rows.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-aa59003e249c5274743a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aa59003e249c5274743a">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["an author of classification report","an author of the vegetation classification","an author on the report, managed the accuracy assessment fieldwork","author of dataset","collected and analyzed data for masters thesis","first author on the vegetation classification","lead author of dataset","lead author on classification report","oversaw fieldwork, lead author","vegetation classification and co-author","classification","classification lead for the project.","classifier","classifier and writer of descriptions","contractor, surveyor, and classification lead","ecologist, completed field sampling and classification","gis analyst and lead photointerpreter","senior biologist during the time of the project. cdfw performed ras and releves, and classified them","vegcamp program lead, project photointerpreter","co-pi, and botany authority","consultant","senior biological consultant","data contact, environmental scientist","prinicpal contact for aecom","project contact","data coordinator","data management","data manager","data processor","data steward, gis specialist","analyzed the plots for the project. was the contractor's project lead","gic used these surveys and classification of them to map the area.","gis analyst","obtained data for cnps","receiver of data","biological science technician (botany)","collector of majority of deer creek hills data","cooperator, and field lead","field coordinator and data collector","field lead","field lead and data entry person","field manager for cnps at the time of rapid assessments","field manager for nps during accuracy assessment","field staff and mapper","lead biologist interpreter","nps lead and data collector","obtained data","primary surveyor","provided student workers","regional biologist who helped with field effort","surveyor","funding agency, land access, private land contacts","california native plant program","planning",null,"one of the principal investigators on the project","primary mapper and one of the principal investigators on the project","principal investigator","principal investigator/author","senior scientist","vegetation program lead and primary investigator","associate vegetation ecologist","associate wildlife biologist, land program - north, eastern sierra - inland deserts region","environmental scientist / vegetation ecologist","environmental scientist/ vegetation ecologist","environmental scientist/vegetation ecologist","lead biologist for vegcamp","lead ecologist","plot author","primary data collector","project ecologist","project ecologist, trainer, cnps vegetation lead","restoration ecologist","vegcamp lead","vegcamp lead biologist","vegetation ecologist","vegetation ecologist; data collection, supervision of vegetation mapping","advisor","previously botanist at deva, now with usfs in bishop, ca","regional biologist who met with us on reviving project","research advisor","senior biologist","senior environmental scientist","sfan i &amp; m natural resource specialist","cnps vegetation program","collected additional data for the project and managed data entry for their surveys","field survey coordinator, and project lead for cnps (now works for cdfw)","funder","land resources manager","managed field crew and database entry for the project","program director","program lead","project lead","project management","project manager","project manager, including mainting sub-contract with prunske-chattam for surveying","project steward","regional lead","vegetation program director","vegetation program lead","vegetation program lead for cnps","wildland vegetation program manager"],["Author","Author","Author","Author","Author","Author","Author","Author","Author","Author","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Classifier","Co-PI","Consultant","Consultant","Contact","Contact","Contact","Data Manager","Data Manager","Data Manager","Data Manager","Data Manager","Data aggregator","Data aggregator","Data aggregator","Data aggregator","Data aggregator","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Field assistant","Land owner","Not specified","Not specified","Not specified/Unknown","PI","PI","PI","PI","PI","PI","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Plot author","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","Research advisor","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager","System manager"],["ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.16","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.34","ar.38","ar.40","ar.40","ar.17","ar.17","ar.17","ar.19","ar.19","ar.19","ar.19","ar.19","ar.56","ar.56","ar.56","ar.56","ar.56","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.43","ar.45","ar.46","ar.46","ar.47","ar.18","ar.18","ar.18","ar.18","ar.18","ar.18","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.36","ar.53","ar.53","ar.53","ar.53","ar.53","ar.53","ar.53","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54","ar.54"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>ContactRole<\/th>\n      <th>role_name<\/th>\n      <th>ar_code<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<button class="btn btn-primary" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,Q29udGFjdFJvbGU7cm9sZV9uYW1lO2FyX2NvZGUKYW4gYXV0aG9yIG9mIGNsYXNzaWZpY2F0aW9uIHJlcG9ydDtBdXRob3I7YXIuMTYKYW4gYXV0aG9yIG9mIHRoZSB2ZWdldGF0aW9uIGNsYXNzaWZpY2F0aW9uO0F1dGhvcjthci4xNgphbiBhdXRob3Igb24gdGhlIHJlcG9ydCwgbWFuYWdlZCB0aGUgYWNjdXJhY3kgYXNzZXNzbWVudCBmaWVsZHdvcms7QXV0aG9yO2FyLjE2CmF1dGhvciBvZiBkYXRhc2V0O0F1dGhvcjthci4xNgpjb2xsZWN0ZWQgYW5kIGFuYWx5emVkIGRhdGEgZm9yIG1hc3RlcnMgdGhlc2lzO0F1dGhvcjthci4xNgpmaXJzdCBhdXRob3Igb24gdGhlIHZlZ2V0YXRpb24gY2xhc3NpZmljYXRpb247QXV0aG9yO2FyLjE2CmxlYWQgYXV0aG9yIG9mIGRhdGFzZXQ7QXV0aG9yO2FyLjE2CmxlYWQgYXV0aG9yIG9uIGNsYXNzaWZpY2F0aW9uIHJlcG9ydDtBdXRob3I7YXIuMTYKb3ZlcnNhdyBmaWVsZHdvcmssIGxlYWQgYXV0aG9yO0F1dGhvcjthci4xNgp2ZWdldGF0aW9uIGNsYXNzaWZpY2F0aW9uIGFuZCBjby1hdXRob3I7QXV0aG9yO2FyLjE2CmNsYXNzaWZpY2F0aW9uO0NsYXNzaWZpZXI7YXIuMzQKY2xhc3NpZmljYXRpb24gbGVhZCBmb3IgdGhlIHByb2plY3QuO0NsYXNzaWZpZXI7YXIuMzQKY2xhc3NpZmllcjtDbGFzc2lmaWVyO2FyLjM0CmNsYXNzaWZpZXIgYW5kIHdyaXRlciBvZiBkZXNjcmlwdGlvbnM7Q2xhc3NpZmllcjthci4zNApjb250cmFjdG9yLCBzdXJ2ZXlvciwgYW5kIGNsYXNzaWZpY2F0aW9uIGxlYWQ7Q2xhc3NpZmllcjthci4zNAplY29sb2dpc3QsIGNvbXBsZXRlZCBmaWVsZCBzYW1wbGluZyBhbmQgY2xhc3NpZmljYXRpb247Q2xhc3NpZmllcjthci4zNApnaXMgYW5hbHlzdCBhbmQgbGVhZCBwaG90b2ludGVycHJldGVyO0NsYXNzaWZpZXI7YXIuMzQKc2VuaW9yIGJpb2xvZ2lzdCBkdXJpbmcgdGhlIHRpbWUgb2YgdGhlIHByb2plY3QuIGNkZncgcGVyZm9ybWVkIHJhcyBhbmQgcmVsZXZlcywgYW5kIGNsYXNzaWZpZWQgdGhlbTtDbGFzc2lmaWVyO2FyLjM0CnZlZ2NhbXAgcHJvZ3JhbSBsZWFkLCBwcm9qZWN0IHBob3RvaW50ZXJwcmV0ZXI7Q2xhc3NpZmllcjthci4zNApjby1waSwgYW5kIGJvdGFueSBhdXRob3JpdHk7Q28tUEk7YXIuMzgKY29uc3VsdGFudDtDb25zdWx0YW50O2FyLjQwCnNlbmlvciBiaW9sb2dpY2FsIGNvbnN1bHRhbnQ7Q29uc3VsdGFudDthci40MApkYXRhIGNvbnRhY3QsIGVudmlyb25tZW50YWwgc2NpZW50aXN0O0NvbnRhY3Q7YXIuMTcKcHJpbmljcGFsIGNvbnRhY3QgZm9yIGFlY29tO0NvbnRhY3Q7YXIuMTcKcHJvamVjdCBjb250YWN0O0NvbnRhY3Q7YXIuMTcKZGF0YSBjb29yZGluYXRvcjtEYXRhIE1hbmFnZXI7YXIuMTkKZGF0YSBtYW5hZ2VtZW50O0RhdGEgTWFuYWdlcjthci4xOQpkYXRhIG1hbmFnZXI7RGF0YSBNYW5hZ2VyO2FyLjE5CmRhdGEgcHJvY2Vzc29yO0RhdGEgTWFuYWdlcjthci4xOQpkYXRhIHN0ZXdhcmQsIGdpcyBzcGVjaWFsaXN0O0RhdGEgTWFuYWdlcjthci4xOQphbmFseXplZCB0aGUgcGxvdHMgZm9yIHRoZSBwcm9qZWN0LiB3YXMgdGhlIGNvbnRyYWN0b3IncyBwcm9qZWN0IGxlYWQ7RGF0YSBhZ2dyZWdhdG9yO2FyLjU2CmdpYyB1c2VkIHRoZXNlIHN1cnZleXMgYW5kIGNsYXNzaWZpY2F0aW9uIG9mIHRoZW0gdG8gbWFwIHRoZSBhcmVhLjtEYXRhIGFnZ3JlZ2F0b3I7YXIuNTYKZ2lzIGFuYWx5c3Q7RGF0YSBhZ2dyZWdhdG9yO2FyLjU2Cm9idGFpbmVkIGRhdGEgZm9yIGNucHM7RGF0YSBhZ2dyZWdhdG9yO2FyLjU2CnJlY2VpdmVyIG9mIGRhdGE7RGF0YSBhZ2dyZWdhdG9yO2FyLjU2CmJpb2xvZ2ljYWwgc2NpZW5jZSB0ZWNobmljaWFuIChib3RhbnkpO0ZpZWxkIGFzc2lzdGFudDthci40Mwpjb2xsZWN0b3Igb2YgbWFqb3JpdHkgb2YgZGVlciBjcmVlayBoaWxscyBkYXRhO0ZpZWxkIGFzc2lzdGFudDthci40Mwpjb29wZXJhdG9yLCBhbmQgZmllbGQgbGVhZDtGaWVsZCBhc3Npc3RhbnQ7YXIuNDMKZmllbGQgY29vcmRpbmF0b3IgYW5kIGRhdGEgY29sbGVjdG9yO0ZpZWxkIGFzc2lzdGFudDthci40MwpmaWVsZCBsZWFkO0ZpZWxkIGFzc2lzdGFudDthci40MwpmaWVsZCBsZWFkIGFuZCBkYXRhIGVudHJ5IHBlcnNvbjtGaWVsZCBhc3Npc3RhbnQ7YXIuNDMKZmllbGQgbWFuYWdlciBmb3IgY25wcyBhdCB0aGUgdGltZSBvZiByYXBpZCBhc3Nlc3NtZW50cztGaWVsZCBhc3Npc3RhbnQ7YXIuNDMKZmllbGQgbWFuYWdlciBmb3IgbnBzIGR1cmluZyBhY2N1cmFjeSBhc3Nlc3NtZW50O0ZpZWxkIGFzc2lzdGFudDthci40MwpmaWVsZCBzdGFmZiBhbmQgbWFwcGVyO0ZpZWxkIGFzc2lzdGFudDthci40MwpsZWFkIGJpb2xvZ2lzdCBpbnRlcnByZXRlcjtGaWVsZCBhc3Npc3RhbnQ7YXIuNDMKbnBzIGxlYWQgYW5kIGRhdGEgY29sbGVjdG9yO0ZpZWxkIGFzc2lzdGFudDthci40MwpvYnRhaW5lZCBkYXRhO0ZpZWxkIGFzc2lzdGFudDthci40MwpwcmltYXJ5IHN1cnZleW9yO0ZpZWxkIGFzc2lzdGFudDthci40Mwpwcm92aWRlZCBzdHVkZW50IHdvcmtlcnM7RmllbGQgYXNzaXN0YW50O2FyLjQzCnJlZ2lvbmFsIGJpb2xvZ2lzdCB3aG8gaGVscGVkIHdpdGggZmllbGQgZWZmb3J0O0ZpZWxkIGFzc2lzdGFudDthci40MwpzdXJ2ZXlvcjtGaWVsZCBhc3Npc3RhbnQ7YXIuNDMKZnVuZGluZyBhZ2VuY3ksIGxhbmQgYWNjZXNzLCBwcml2YXRlIGxhbmQgY29udGFjdHM7TGFuZCBvd25lcjthci40NQpjYWxpZm9ybmlhIG5hdGl2ZSBwbGFudCBwcm9ncmFtO05vdCBzcGVjaWZpZWQ7YXIuNDYKcGxhbm5pbmc7Tm90IHNwZWNpZmllZDthci40NgpOQTtOb3Qgc3BlY2lmaWVkL1Vua25vd247YXIuNDcKb25lIG9mIHRoZSBwcmluY2lwYWwgaW52ZXN0aWdhdG9ycyBvbiB0aGUgcHJvamVjdDtQSTthci4xOApwcmltYXJ5IG1hcHBlciBhbmQgb25lIG9mIHRoZSBwcmluY2lwYWwgaW52ZXN0aWdhdG9ycyBvbiB0aGUgcHJvamVjdDtQSTthci4xOApwcmluY2lwYWwgaW52ZXN0aWdhdG9yO1BJO2FyLjE4CnByaW5jaXBhbCBpbnZlc3RpZ2F0b3IvYXV0aG9yO1BJO2FyLjE4CnNlbmlvciBzY2llbnRpc3Q7UEk7YXIuMTgKdmVnZXRhdGlvbiBwcm9ncmFtIGxlYWQgYW5kIHByaW1hcnkgaW52ZXN0aWdhdG9yO1BJO2FyLjE4CmFzc29jaWF0ZSB2ZWdldGF0aW9uIGVjb2xvZ2lzdDtQbG90IGF1dGhvcjthci4zNgphc3NvY2lhdGUgd2lsZGxpZmUgYmlvbG9naXN0LCBsYW5kIHByb2dyYW0gLSBub3J0aCwgZWFzdGVybiBzaWVycmEgLSBpbmxhbmQgZGVzZXJ0cyByZWdpb247UGxvdCBhdXRob3I7YXIuMzYKZW52aXJvbm1lbnRhbCBzY2llbnRpc3QgLyB2ZWdldGF0aW9uIGVjb2xvZ2lzdDtQbG90IGF1dGhvcjthci4zNgplbnZpcm9ubWVudGFsIHNjaWVudGlzdC8gdmVnZXRhdGlvbiBlY29sb2dpc3Q7UGxvdCBhdXRob3I7YXIuMzYKZW52aXJvbm1lbnRhbCBzY2llbnRpc3QvdmVnZXRhdGlvbiBlY29sb2dpc3Q7UGxvdCBhdXRob3I7YXIuMzYKbGVhZCBiaW9sb2dpc3QgZm9yIHZlZ2NhbXA7UGxvdCBhdXRob3I7YXIuMzYKbGVhZCBlY29sb2dpc3Q7UGxvdCBhdXRob3I7YXIuMzYKcGxvdCBhdXRob3I7UGxvdCBhdXRob3I7YXIuMzYKcHJpbWFyeSBkYXRhIGNvbGxlY3RvcjtQbG90IGF1dGhvcjthci4zNgpwcm9qZWN0IGVjb2xvZ2lzdDtQbG90IGF1dGhvcjthci4zNgpwcm9qZWN0IGVjb2xvZ2lzdCwgdHJhaW5lciwgY25wcyB2ZWdldGF0aW9uIGxlYWQ7UGxvdCBhdXRob3I7YXIuMzYKcmVzdG9yYXRpb24gZWNvbG9naXN0O1Bsb3QgYXV0aG9yO2FyLjM2CnZlZ2NhbXAgbGVhZDtQbG90IGF1dGhvcjthci4zNgp2ZWdjYW1wIGxlYWQgYmlvbG9naXN0O1Bsb3QgYXV0aG9yO2FyLjM2CnZlZ2V0YXRpb24gZWNvbG9naXN0O1Bsb3QgYXV0aG9yO2FyLjM2CiJ2ZWdldGF0aW9uIGVjb2xvZ2lzdDsgZGF0YSBjb2xsZWN0aW9uLCBzdXBlcnZpc2lvbiBvZiB2ZWdldGF0aW9uIG1hcHBpbmciO1Bsb3QgYXV0aG9yO2FyLjM2CmFkdmlzb3I7UmVzZWFyY2ggYWR2aXNvcjthci41MwpwcmV2aW91c2x5IGJvdGFuaXN0IGF0IGRldmEsIG5vdyB3aXRoIHVzZnMgaW4gYmlzaG9wLCBjYTtSZXNlYXJjaCBhZHZpc29yO2FyLjUzCnJlZ2lvbmFsIGJpb2xvZ2lzdCB3aG8gbWV0IHdpdGggdXMgb24gcmV2aXZpbmcgcHJvamVjdDtSZXNlYXJjaCBhZHZpc29yO2FyLjUzCnJlc2VhcmNoIGFkdmlzb3I7UmVzZWFyY2ggYWR2aXNvcjthci41MwpzZW5pb3IgYmlvbG9naXN0O1Jlc2VhcmNoIGFkdmlzb3I7YXIuNTMKc2VuaW9yIGVudmlyb25tZW50YWwgc2NpZW50aXN0O1Jlc2VhcmNoIGFkdmlzb3I7YXIuNTMKc2ZhbiBpICYgbSBuYXR1cmFsIHJlc291cmNlIHNwZWNpYWxpc3Q7UmVzZWFyY2ggYWR2aXNvcjthci41MwpjbnBzIHZlZ2V0YXRpb24gcHJvZ3JhbTtTeXN0ZW0gbWFuYWdlcjthci41NApjb2xsZWN0ZWQgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgcHJvamVjdCBhbmQgbWFuYWdlZCBkYXRhIGVudHJ5IGZvciB0aGVpciBzdXJ2ZXlzO1N5c3RlbSBtYW5hZ2VyO2FyLjU0CmZpZWxkIHN1cnZleSBjb29yZGluYXRvciwgYW5kIHByb2plY3QgbGVhZCBmb3IgY25wcyAobm93IHdvcmtzIGZvciBjZGZ3KTtTeXN0ZW0gbWFuYWdlcjthci41NApmdW5kZXI7U3lzdGVtIG1hbmFnZXI7YXIuNTQKbGFuZCByZXNvdXJjZXMgbWFuYWdlcjtTeXN0ZW0gbWFuYWdlcjthci41NAptYW5hZ2VkIGZpZWxkIGNyZXcgYW5kIGRhdGFiYXNlIGVudHJ5IGZvciB0aGUgcHJvamVjdDtTeXN0ZW0gbWFuYWdlcjthci41NApwcm9ncmFtIGRpcmVjdG9yO1N5c3RlbSBtYW5hZ2VyO2FyLjU0CnByb2dyYW0gbGVhZDtTeXN0ZW0gbWFuYWdlcjthci41NApwcm9qZWN0IGxlYWQ7U3lzdGVtIG1hbmFnZXI7YXIuNTQKcHJvamVjdCBtYW5hZ2VtZW50O1N5c3RlbSBtYW5hZ2VyO2FyLjU0CnByb2plY3QgbWFuYWdlcjtTeXN0ZW0gbWFuYWdlcjthci41NApwcm9qZWN0IG1hbmFnZXIsIGluY2x1ZGluZyBtYWludGluZyBzdWItY29udHJhY3Qgd2l0aCBwcnVuc2tlLWNoYXR0YW0gZm9yIHN1cnZleWluZztTeXN0ZW0gbWFuYWdlcjthci41NApwcm9qZWN0IHN0ZXdhcmQ7U3lzdGVtIG1hbmFnZXI7YXIuNTQKcmVnaW9uYWwgbGVhZDtTeXN0ZW0gbWFuYWdlcjthci41NAp2ZWdldGF0aW9uIHByb2dyYW0gZGlyZWN0b3I7U3lzdGVtIG1hbmFnZXI7YXIuNTQKdmVnZXRhdGlvbiBwcm9ncmFtIGxlYWQ7U3lzdGVtIG1hbmFnZXI7YXIuNTQKdmVnZXRhdGlvbiBwcm9ncmFtIGxlYWQgZm9yIGNucHM7U3lzdGVtIG1hbmFnZXI7YXIuNTQKd2lsZGxhbmQgdmVnZXRhdGlvbiBwcm9ncmFtIG1hbmFnZXI7U3lzdGVtIG1hbmFnZXI7YXIuNTQK');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'role_map.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() => {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  " path="cdfw_role_mappings.csv" has_icon="TRUE"><i class="fa fa-download"></i> Download Role Mappings as CSV</button>
</div>
</div>
</section>
<section id="disturbance" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="disturbance"><span class="header-section-number">4</span> Disturbance</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disturbance_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Unknown intensity values were found:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 999</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 35</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 52</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 9</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! The following impact codes were missing from the impacts lookup table:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 71</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 39</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/disturbanceLT.csv</code></pre>
</div>
</div>
<section id="data-sources-and-merging" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="data-sources-and-merging"><span class="header-section-number">4.1</span> Data Sources and Merging</h3>
<p>Disturbance data is extracted from <code>RAImpacts.csv</code> files, as well as the <code>LImpacts.csv</code> lookup table, which provides descriptive labels for impact codes.</p>
<p>Intensity values are checked to ensure they conform to expected values (1, 2, or 3). Valid intensity codes are converted to descriptive labels: 1 becomes “Low”, 2 becomes “Moderate”, and 3 becomes “High”. Any non-standard intensity values are left as <code>NA</code>. Unknown values in the <code>CodeImpact</code> field not present in the impacts lookup table are identified. Impact codes present in the <code>CodeImpact</code> field but missing from the impacts lookup table are identified. These values are converted to <code>NA</code> in the <code>disturbance_type</code> field.</p>
<p>Disturbance age and extent are not present in the CDFW data. They are set to <code>NA</code> for all rows in the loader table.</p>
<p>The table below maps specific impact types from CDFW data to standardized VegBank disturbance categories.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c4fcd7b90fff195e38f9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c4fcd7b90fff195e38f9">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Development","ORV activity","Agriculture","Grazing","Competition from exotics","Logging","Insufficient population/stand size","Altered flood/tidal regime","Mining","Hybridization","Groundwater pumping","Dam/inundation","Other","Surface water diversion","Road/trail construction/maint.","Biocides","Pollution","Unknown","Vandalism/dumping/litter","Foot traffic/trampling","Improper burning regime","Over collecting/poaching","Erosion/runoff","Altered thermal regime","Landfill","Degrading water quality","Wood cutting","Military operations","Recreational use (non ORV)","Nest parasitism","Non-native predators","Rip-rap, bank protection","Channelization (human caused)","Feral pigs","Burros","Rills","Phytogenic mounding","Sudden Oak Death (SODS)",null],["Human, general","Roads and vehicular traffic","Cultivation","Grazing, domestic stock","Other disturbances","Timber harvest, general","Other disturbances","Hydrologic alteration","Human, general","Other disturbances","Hydrologic alteration","Hydrologic alteration","Other disturbances","Hydrologic alteration","Roads and vehicular traffic","Herbicide or chemical","Human, general","unknown","Human, general","Trampling and trails","Fire suppression","Human, general","Erosion","Other disturbances","Human, general","Hydrologic alteration","Timber harvest, selective","Human, general","Trampling and trails","Natural, general","Other disturbances","Hydrologic alteration","Hydrologic alteration","Animal, general","Animal, general","Erosion","Erosion","Plant disease","Unknown"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>CDFW Impact Type<\/th>\n      <th>vegbank_disturbance<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<button class="btn btn-primary" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,Q0RGVyBJbXBhY3QgVHlwZTt2ZWdiYW5rX2Rpc3R1cmJhbmNlCkRldmVsb3BtZW50O0h1bWFuLCBnZW5lcmFsCk9SViBhY3Rpdml0eTtSb2FkcyBhbmQgdmVoaWN1bGFyIHRyYWZmaWMKQWdyaWN1bHR1cmU7Q3VsdGl2YXRpb24KR3JhemluZztHcmF6aW5nLCBkb21lc3RpYyBzdG9jawpDb21wZXRpdGlvbiBmcm9tIGV4b3RpY3M7T3RoZXIgZGlzdHVyYmFuY2VzCkxvZ2dpbmc7VGltYmVyIGhhcnZlc3QsIGdlbmVyYWwKSW5zdWZmaWNpZW50IHBvcHVsYXRpb24vc3RhbmQgc2l6ZTtPdGhlciBkaXN0dXJiYW5jZXMKQWx0ZXJlZCBmbG9vZC90aWRhbCByZWdpbWU7SHlkcm9sb2dpYyBhbHRlcmF0aW9uCk1pbmluZztIdW1hbiwgZ2VuZXJhbApIeWJyaWRpemF0aW9uO090aGVyIGRpc3R1cmJhbmNlcwpHcm91bmR3YXRlciBwdW1waW5nO0h5ZHJvbG9naWMgYWx0ZXJhdGlvbgpEYW0vaW51bmRhdGlvbjtIeWRyb2xvZ2ljIGFsdGVyYXRpb24KT3RoZXI7T3RoZXIgZGlzdHVyYmFuY2VzClN1cmZhY2Ugd2F0ZXIgZGl2ZXJzaW9uO0h5ZHJvbG9naWMgYWx0ZXJhdGlvbgpSb2FkL3RyYWlsIGNvbnN0cnVjdGlvbi9tYWludC47Um9hZHMgYW5kIHZlaGljdWxhciB0cmFmZmljCkJpb2NpZGVzO0hlcmJpY2lkZSBvciBjaGVtaWNhbApQb2xsdXRpb247SHVtYW4sIGdlbmVyYWwKVW5rbm93bjt1bmtub3duClZhbmRhbGlzbS9kdW1waW5nL2xpdHRlcjtIdW1hbiwgZ2VuZXJhbApGb290IHRyYWZmaWMvdHJhbXBsaW5nO1RyYW1wbGluZyBhbmQgdHJhaWxzCkltcHJvcGVyIGJ1cm5pbmcgcmVnaW1lO0ZpcmUgc3VwcHJlc3Npb24KT3ZlciBjb2xsZWN0aW5nL3BvYWNoaW5nO0h1bWFuLCBnZW5lcmFsCkVyb3Npb24vcnVub2ZmO0Vyb3Npb24KQWx0ZXJlZCB0aGVybWFsIHJlZ2ltZTtPdGhlciBkaXN0dXJiYW5jZXMKTGFuZGZpbGw7SHVtYW4sIGdlbmVyYWwKRGVncmFkaW5nIHdhdGVyIHF1YWxpdHk7SHlkcm9sb2dpYyBhbHRlcmF0aW9uCldvb2QgY3V0dGluZztUaW1iZXIgaGFydmVzdCwgc2VsZWN0aXZlCk1pbGl0YXJ5IG9wZXJhdGlvbnM7SHVtYW4sIGdlbmVyYWwKUmVjcmVhdGlvbmFsIHVzZSAobm9uIE9SVik7VHJhbXBsaW5nIGFuZCB0cmFpbHMKTmVzdCBwYXJhc2l0aXNtO05hdHVyYWwsIGdlbmVyYWwKTm9uLW5hdGl2ZSBwcmVkYXRvcnM7T3RoZXIgZGlzdHVyYmFuY2VzClJpcC1yYXAsIGJhbmsgcHJvdGVjdGlvbjtIeWRyb2xvZ2ljIGFsdGVyYXRpb24KQ2hhbm5lbGl6YXRpb24gKGh1bWFuIGNhdXNlZCk7SHlkcm9sb2dpYyBhbHRlcmF0aW9uCkZlcmFsIHBpZ3M7QW5pbWFsLCBnZW5lcmFsCkJ1cnJvcztBbmltYWwsIGdlbmVyYWwKUmlsbHM7RXJvc2lvbgpQaHl0b2dlbmljIG1vdW5kaW5nO0Vyb3Npb24KU3VkZGVuIE9hayBEZWF0aCAoU09EUyk7UGxhbnQgZGlzZWFzZQpOQTtVbmtub3duCg==');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'disturbance_map.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() => {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  " path="cdfw_disturbance_mappings.csv" has_icon="TRUE"><i class="fa fa-download"></i> Download Disturbance Mappings as CSV</button>
</div>
</div>
</section>
</section>
<section id="plots" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="plots"><span class="header-section-number">5</span> Plots</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plots_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some values in the PlotArea column were not able to be converted to numbers. Here is a sample of some of the 72 unique values:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>15%, 65%, 20%, 80%, 75%, 30%, Entire Polygon, 70%, 10%, 50%, 35%, 90%, 60%,
40%, 25%, Other (please type in), 55%, 85%, …, 67%, and 80 %</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some rows have a PlotShape value, but no PlotArea. This affects rows with the following SurveyIds (687 rows): ANZA197, ANZA198, ANZA199, ANZA200, ANZA201, ANZA202, ANZA203, ANZA204, ANZA205, ANZA206, ANZA154, ANZA155, ANZA156, ANZA157, ANZA158, ANZA159, ANZA160, ANZA161, …, MPEN001, and SCRUZ586</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some rows have a PlotArea value, but no PlotShape This affects rows with the following SurveyIds (499 rows): CANO030, COYO064, EBAY0036, I05141020A, I05141210, I05141320A, MOJA0326, MOJCH001, N1403251426, N1403251442, N1403251602, N1403251609, N1403251631, N1403251641, N1403251652, N1403251704, N1403251726, N1403251750, …, PORE104, and 1A05916</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some percent rock gravel values are greater than 100. Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some tree cover values (8 rows) are greater than 100. Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some Conif_ht2 values were not able to be converted to numeric (7 rows). Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some Hdwd_ht2 values were not able to be converted to numeric (9 rows). Check input data.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/plotsLT.csv</code></pre>
</div>
</div>
<section id="data-sources-and-initial-merging" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="data-sources-and-initial-merging"><span class="header-section-number">5.1</span> Data Sources and Initial Merging</h3>
<p>Plot data is extracted from multiple CSV files, including <code>RAPlots.csv</code>, <code>AltPlots.csv</code>, and <code>AltStrata.csv</code>. These files are all merged into a single table using <code>SurveyID</code> as the join key. Empty columns are removed.</p>
<p>Survey dates are converted to Date format, and validation checks ensure dates fall between 1900 and the present day.</p>
</section>
<section id="coordinate-standardization-and-location-assignment" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="coordinate-standardization-and-location-assignment"><span class="header-section-number">5.2</span> Coordinate Standardization and Location Assignment</h3>
<p>GPS datum values are standardized. EPSG codes are assigned based on the combination of datum and UTM zone. UTM coordinates are converted to latitude/longitude using the appropriate coordinate reference system (CRS) for each plot.</p>
<p>Here are the CRS Assignment Rules:</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f877277a4ca43a9b776c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f877277a4ca43a9b776c">{"x":{"filter":"none","vertical":false,"data":[["WGS84","WGS84","NAD83","NAD83","NAD27","NAD27"],[10,11,10,11,10,11],[32610,32611,26910,26911,26710,26711]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>author_datum<\/th>\n      <th>UTM_zone<\/th>\n      <th>epsg<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-center","targets":"_all"}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="elevation-and-location-accuracy" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="elevation-and-location-accuracy"><span class="header-section-number">5.3</span> Elevation and Location Accuracy</h3>
<p>Elevation values are converted to <strong>meters</strong> when marked as feet in the source data. GPS error measurements are similarly converted to meters.</p>
</section>
<section id="plot-area-and-shape" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="plot-area-and-shape"><span class="header-section-number">5.4</span> Plot Area and Shape</h3>
<p>Plot area is normalized by removing unit indicators (assuming square meters), converting hectares to square meters, and calculating area from plot dimensions or view radius when direct area measurements are unavailable. A value of <strong><code>-1</code></strong> indicates plots with no defined boundaries.</p>
<p>Plot shapes (circle, square, rectangle) are inferred from available dimension data when not explicitly recorded.</p>
</section>
<section id="slope-and-aspect" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="slope-and-aspect"><span class="header-section-number">5.5</span> Slope and Aspect</h3>
<p>Slope aspect values are standardized, with flat locations coded as <strong><code>-1</code></strong> and variable locations as <strong><code>-2</code></strong>. Slope gradient is calculated from actual measurements when available. Otherwise, it is derived from slope category ranges using midpoint calculations.</p>
</section>
<section id="substrate-cover-rock-and-gravel" class="level3" data-number="5.6">
<h3 data-number="5.6" class="anchored" data-anchor-id="substrate-cover-rock-and-gravel"><span class="header-section-number">5.6</span> Substrate Cover (Rock and Gravel)</h3>
<p>Rock and gravel cover is computed by summing percent cover values from the <code>Boulders</code>, <code>Stones</code>, <code>Cobbles</code>, and <code>Gravels</code> fields after treating <code>999</code> as missing. Values above 100 trigger warning messages.</p>
</section>
<section id="vegetation-height-classes" class="level3" data-number="5.7">
<h3 data-number="5.7" class="anchored" data-anchor-id="vegetation-height-classes"><span class="header-section-number">5.7</span> Vegetation Height Classes</h3>
<p>Height class fields for conifer, hardwood, shrub, and herbaceous vegetation are converted to numeric values by taking midpoints of ranges (e.g., <code>2–5 m - 3.5</code>). Less-than ranges (e.g., <code>&lt;0.5 m</code>) are converted using a midpoint assumption (half of the threshold value), and “Not recorded” / “Not present” are treated as missing. Values that cannot be parsed trigger warning messages.</p>
<p>The table below shows representative examples of the transformation rules.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2838a1c7bd2b26624a21" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2838a1c7bd2b26624a21">{"x":{"filter":"none","vertical":false,"data":[["2-5 m","0.5-1 m","&lt;0.5 m","&gt;50 m","Not recorded","Not present"],["midpoint of range","midpoint of range","midpoint of range assuming 0 as low end","higher than 50 m","missing token → NA","missing token → NA"],[3.5,0.75,0.25,55,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>example_input<\/th>\n      <th>rule<\/th>\n      <th>numeric_output<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="tree-growth-form-assignment" class="level3" data-number="5.8">
<h3 data-number="5.8" class="anchored" data-anchor-id="tree-growth-form-assignment"><span class="header-section-number">5.8</span> Tree Growth Form Assignment</h3>
<p>Growth form assignments prioritize the dominant tree type (conifer vs.&nbsp;hardwood) based on cover values, with the secondary growth form assigned to the less dominant type.</p>
</section>
<section id="topographic-position" class="level3" data-number="5.9">
<h3 data-number="5.9" class="anchored" data-anchor-id="topographic-position"><span class="header-section-number">5.9</span> Topographic Position</h3>
<p>Topographic position values from the MacroTopo field are mapped to VegBank’s topo_position values using the lookup table below.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-48f20aa316b9ef2b10d1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-48f20aa316b9ef2b10d1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Bottom","Lower 1/3 of slope","Bottom to Lower 1/3 of slope","Bottom to Mid 1/3 of slope","Bottom to Upper 1/3 of slope","Entire slope","Middle 1/3 of slope","Middle to Upper 1/3 of slope","Lower to Middle 1/3 of slope","Lower to Upper 1/3 of slope","Upper 1/3 of slope","Upper 1/3 of slope to Ridgetop","Middle 1/3 of slope to Ridgetop","Lower 1/3 of slope to Ridgetop","Ridge top","upper","mid","Bench","Channel bed","Lowslope","6","Not recorded","&lt;Null&gt;","Lower 1/3 of slope to Ridegetop","Other","Wash (channel bed)","Toeslope","Terrace (former shoreline or floodplain)","Ridge Top","Dune/sandfield","Draw","Pediment","Unknown","Edge of basin/wetland","* choose one *","Badland (complex of draws &amp; interfluves)","High slope","Midslope","Low level","Step in slope","Toe-slope","Saddle/Summit/Ridgeline","Mid-slope","Braided/flood plain","Rolling Hills/Ridges","Broad wash","Bar/swale","Bajada","Pavements","Valley","Playa","Narrow wash","Deeply dissected hills","Mud hills/Badlands","Entire Slope","Basin/Wetland","Eroded Hills","Flat","Toeslope (alluvial fan/bajada)","High level/summit to HighSlope","Basin/wetland","Low- to midslope","High level/summit","Lower","Mid","Upper","Top","High level","Basin floor","Channel wall","Interfluve/Summit","bottom"],["Basin floor","Lowslope","Lowslope","Lowslope","Midslope","Midslope","Midslope","Midslope","Midslope","Midslope","High slope","High slope","High slope","Midslope","Interfluve","High slope","Midslope","Step in slope","Channel bed","Lowslope","Basin floor",null,null,"Midslope",null,"Channel bed","Toeslope","Low level","Interfluve","Low level","Channel bed","Lowslope",null,"Basin floor",null,"Midslope","High slope","Midslope","Low level","Step in slope","Toeslope","Interfluve","Midslope","Low level","Interfluve","Channel bed","Low level","Toeslope","High level","Low level","Basin floor","Channel bed","Midslope","Midslope","Midslope","Basin floor","Midslope","Low level","Toeslope","High slope","Basin floor","Midslope","High level","Lowslope","Midslope","High slope","Interfluve","High level","Basin floor","Channel wall","Interfluve","Low level"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>MacroTopo<\/th>\n      <th>topo_position<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<button class="btn btn-primary" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,TWFjcm9Ub3BvO3RvcG9fcG9zaXRpb24KQm90dG9tO0Jhc2luIGZsb29yCkxvd2VyIDEvMyBvZiBzbG9wZTtMb3dzbG9wZQpCb3R0b20gdG8gTG93ZXIgMS8zIG9mIHNsb3BlO0xvd3Nsb3BlCkJvdHRvbSB0byBNaWQgMS8zIG9mIHNsb3BlO0xvd3Nsb3BlCkJvdHRvbSB0byBVcHBlciAxLzMgb2Ygc2xvcGU7TWlkc2xvcGUKRW50aXJlIHNsb3BlO01pZHNsb3BlCk1pZGRsZSAxLzMgb2Ygc2xvcGU7TWlkc2xvcGUKTWlkZGxlIHRvIFVwcGVyIDEvMyBvZiBzbG9wZTtNaWRzbG9wZQpMb3dlciB0byBNaWRkbGUgMS8zIG9mIHNsb3BlO01pZHNsb3BlCkxvd2VyIHRvIFVwcGVyIDEvMyBvZiBzbG9wZTtNaWRzbG9wZQpVcHBlciAxLzMgb2Ygc2xvcGU7SGlnaCBzbG9wZQpVcHBlciAxLzMgb2Ygc2xvcGUgdG8gUmlkZ2V0b3A7SGlnaCBzbG9wZQpNaWRkbGUgMS8zIG9mIHNsb3BlIHRvIFJpZGdldG9wO0hpZ2ggc2xvcGUKTG93ZXIgMS8zIG9mIHNsb3BlIHRvIFJpZGdldG9wO01pZHNsb3BlClJpZGdlIHRvcDtJbnRlcmZsdXZlCnVwcGVyO0hpZ2ggc2xvcGUKbWlkO01pZHNsb3BlCkJlbmNoO1N0ZXAgaW4gc2xvcGUKQ2hhbm5lbCBiZWQ7Q2hhbm5lbCBiZWQKTG93c2xvcGU7TG93c2xvcGUKNjtCYXNpbiBmbG9vcgpOb3QgcmVjb3JkZWQ7TkEKPE51bGw+O05BCkxvd2VyIDEvMyBvZiBzbG9wZSB0byBSaWRlZ2V0b3A7TWlkc2xvcGUKT3RoZXI7TkEKV2FzaCAoY2hhbm5lbCBiZWQpO0NoYW5uZWwgYmVkClRvZXNsb3BlO1RvZXNsb3BlClRlcnJhY2UgKGZvcm1lciBzaG9yZWxpbmUgb3IgZmxvb2RwbGFpbik7TG93IGxldmVsClJpZGdlIFRvcDtJbnRlcmZsdXZlCkR1bmUvc2FuZGZpZWxkO0xvdyBsZXZlbApEcmF3O0NoYW5uZWwgYmVkClBlZGltZW50O0xvd3Nsb3BlClVua25vd247TkEKRWRnZSBvZiBiYXNpbi93ZXRsYW5kO0Jhc2luIGZsb29yCiogY2hvb3NlIG9uZSAqO05BCkJhZGxhbmQgKGNvbXBsZXggb2YgZHJhd3MgJiBpbnRlcmZsdXZlcyk7TWlkc2xvcGUKSGlnaCBzbG9wZTtIaWdoIHNsb3BlCk1pZHNsb3BlO01pZHNsb3BlCkxvdyBsZXZlbDtMb3cgbGV2ZWwKU3RlcCBpbiBzbG9wZTtTdGVwIGluIHNsb3BlClRvZS1zbG9wZTtUb2VzbG9wZQpTYWRkbGUvU3VtbWl0L1JpZGdlbGluZTtJbnRlcmZsdXZlCk1pZC1zbG9wZTtNaWRzbG9wZQpCcmFpZGVkL2Zsb29kIHBsYWluO0xvdyBsZXZlbApSb2xsaW5nIEhpbGxzL1JpZGdlcztJbnRlcmZsdXZlCkJyb2FkIHdhc2g7Q2hhbm5lbCBiZWQKQmFyL3N3YWxlO0xvdyBsZXZlbApCYWphZGE7VG9lc2xvcGUKUGF2ZW1lbnRzO0hpZ2ggbGV2ZWwKVmFsbGV5O0xvdyBsZXZlbApQbGF5YTtCYXNpbiBmbG9vcgpOYXJyb3cgd2FzaDtDaGFubmVsIGJlZApEZWVwbHkgZGlzc2VjdGVkIGhpbGxzO01pZHNsb3BlCk11ZCBoaWxscy9CYWRsYW5kcztNaWRzbG9wZQpFbnRpcmUgU2xvcGU7TWlkc2xvcGUKQmFzaW4vV2V0bGFuZDtCYXNpbiBmbG9vcgpFcm9kZWQgSGlsbHM7TWlkc2xvcGUKRmxhdDtMb3cgbGV2ZWwKVG9lc2xvcGUgKGFsbHV2aWFsIGZhbi9iYWphZGEpO1RvZXNsb3BlCkhpZ2ggbGV2ZWwvc3VtbWl0IHRvIEhpZ2hTbG9wZTtIaWdoIHNsb3BlCkJhc2luL3dldGxhbmQ7QmFzaW4gZmxvb3IKTG93LSB0byBtaWRzbG9wZTtNaWRzbG9wZQpIaWdoIGxldmVsL3N1bW1pdDtIaWdoIGxldmVsCkxvd2VyO0xvd3Nsb3BlCk1pZDtNaWRzbG9wZQpVcHBlcjtIaWdoIHNsb3BlClRvcDtJbnRlcmZsdXZlCkhpZ2ggbGV2ZWw7SGlnaCBsZXZlbApCYXNpbiBmbG9vcjtCYXNpbiBmbG9vcgpDaGFubmVsIHdhbGw7Q2hhbm5lbCB3YWxsCkludGVyZmx1dmUvU3VtbWl0O0ludGVyZmx1dmUKYm90dG9tO0xvdyBsZXZlbAo=');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'plot_position_map.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() => {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  " path="cdfw_plot_position_mappings.csv" has_icon="TRUE"><i class="fa fa-download"></i> Download Plot Position Mappings as CSV</button>
</div>
</div>
</section>
</section>
<section id="community" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="community"><span class="header-section-number">6</span> Community</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">community_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! cacode_map has duplicate CaCode values (45 codes). Mapping may be ambiguous.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample duplicates:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>- 21.310.00- 32.037.00- 33.020.00- 35.110.00- 35.111.00- 35.150.00- 35.310.00-
36.310.00- 36.400.00- 37.070.00</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some CaCode values map to multiple NVC codes in cacode_map (45 CaCodes). Using the first NVC code for now to avoid row duplication.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>- 21.310.00- 32.037.00- 33.020.00- 35.110.00- 35.111.00- 35.150.00- 35.310.00-
36.310.00- 36.400.00- 37.070.00</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! vb_cc_code is NA for 14279 rows (out of 30468).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/communityClassificationsLT.csv</code></pre>
</div>
</div>
<section id="data-sources-and-merging-1" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="data-sources-and-merging-1"><span class="header-section-number">6.1</span> Data Sources and Merging</h3>
<p>Community classification data is extracted from <code>RAClassifications.csv</code> files, along with <code>RAPlots.csv</code> and <code>RAProjects.csv</code> files. These files are all merged into a single table using <code>ProjectCode</code> as the join key. Empty columns are removed.</p>
</section>
<section id="standardized-classification-methods" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="standardized-classification-methods"><span class="header-section-number">6.2</span> Standardized Classification Methods</h3>
<p>Classification methods are standardized using a lookup table that maps project codes to classification techniques. Three classification approaches are identified from project metadata: inspection-based classification, multi-variate analysis, and table analysis. Classification descriptions and tools from project records are concatenated into a <code>class_notes</code> field, with empty or redundant entries cleaned.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-a20904dacd05fbe7512a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a20904dacd05fbe7512a">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["ALCC","ALCC-GR","ALSC","ANZA","CAVA","CVPA","CVPAA","DRECP","EBAY","FISH","FNWS","HUBB","JOMU","KNOX","LLNL","PIME","PORE","PSMA","PVPLC","PYGM","RNCM","SACT","SAMO","SBVWCD","SCR","SCRUZ","SCSC","SFVW","SJV","SNI","SONO","SONOadj","SPCC","WLKR","WRIV","WSD"],["Classified new and legacy surveys within the two counties as well as those that were in adjacent counties within the same ecoregion subsections.  Surveys that were classified but not included in the vegetation descriptions are given the classification code ALCCadj","Classified new and legacy surveys within the two counties as well as those that were in adjacent counties within the same ecoregion subsections.  Surveys that were classified but not included in the vegetation descriptions are given the classification code ALCCadj","The PC-ORD software suite of classification and ordination tools was used to generate multivariate analyses such as Cluster Analysis and Indicator Species Analysis (McCune and Mefford 1997). These analyses were employed to order vegetation surveys into groups related by their species composition and\nabundance, so that a formalized classification of community types would be created.","COMPCLUS was used to see the similarity of plots using a predetermined number of seed plots.  TWINSPAN was run multiple times for the final classification.  One where species values were all relativized, another where species were set to presence/absence, reduced to just a few cover classes, also tried removing and including rare species. The final was based on the following settings 12 divisions, pseudo-species cut values set to match cover class intervals in the field forms, and no weighting on any class.","surveys were keyed using the Carrizo classificatrion and the MCV to support mapping","Cluster Analysis, Indicator Species Analysis","These data will be compiled with other Ciervo-Panoche south surveys and co-analyzed.","Vegetation was mapped using keys developed for the Central Mojave classification, Joshua Tree National Park, Anza Borrego State Park, and was adpated based on recon, aa, and rapid assessment as the project exanded into new areas.","Cluster Analysis, Indicator Species Analysis","See \"Vegetation Map and Classification of Fish Slough, Inyo and Mono Counties, California,\" (http://nrm.dfg.ca.gov/FileHandler.ashx?DocumentID=76530)","Used the key from the Vegetation of Western San Diego to key each plot to the association level.",null,"A formal site-specific classification using ordination was not performed and the plant communities are not fully described.","These data were analyzed using multivariate cluster analysis, performed by PC-ORD version 6 software. The cluster analysis was based on abundance (cover values) converted to seven different classes using the following modified Braun-Blanquette (1932) cove","Classified with ALCC project",null,"TWINSPAN and Cluster Analysis",null,"Data was run through a cluster analysis using species abundance (cover) converted to seven classes, to identify patterns and groups in the data. The data also were compared to existing classifications in southern California Vegetation resources were assessed through field surveys, resulting in the classification analysis of 26 vegetation alliances, 38 vegetation associations or semi-natural stands",null,"Data for this project is a compilation of existing data not classified by other projects. NVCS names have been given by keying the vegetation using the most appropriate existing vegetation keys.","Cluster Analysis, Indicator Species Analysis","Using programs such as TWINSPAN (Hill 1979), cluster analysis, and ordination (McCune and Mefford 1997), groups are defined by similarities in species composition and abundance. Since plant community datasets are inherently complex and more than one environmental axisdetermines the heterogeneity in plant patterns, a hierarchical agglomerative cluster analysis technique was employed with Sorenson distance and flexible beta linkage method at -0.25 (McCune and Grace 2002). The cluster analysis\ntechnique was based on abundance (cover) values converted to seven different classes using the following modified Braun-Blanquet (1932/1951) cover categories: 1 = &lt; 1%, 2 = 1–5%, 3 = &gt; 5–15%, 4 = &gt; 15–25%, 5 = &gt; 25–50%, 6 = &gt; 50–75%, 7 = &gt; 75%. The majority of the species values fell within the first four cover classes.","A preliminary assignment was made in the field during plot data collection using published MCV membership rules. Based on preliminary field assignments, a regional dataset containing approximately 220 additional relevant plots from formally classified relevé and Rapid Assessment surveys was compiled from the VEGCAMP database. Species composition and cover data for each SBVWCD plot was evaluated by comparison to species composition and cover values of all regional plots. Keys from relevant regional reports were also reviewed for plot assignment. Following this detailed comparison, an alliance and association was assigned to each in accordance with published and/or CDFW-vetted membership criteria.","Stands were keyed based on information in the MCV and other Southern California projects","See description under the SCSC project","CNPS analyzed the species cover data using PC-Ord and R software (McCune and Mefford 2006, R Core Team 2013). The cluster analysis used the Sørensen Distance Measure and Flexible Beta Linkage method at -0.25 (McCune and Grace 2002). Using this method of agglomerative clustering, surveys were grouped together based on similarities in species composition and abundance (McCune and Mefford 1997). CNPS conducted an initial cluster analysis including all surveys in the available dataset. The initial cluster analysis was performed to partition the dataset\ninto manageable subsets. Indicator species analysis (ISA) was used to select cluster group levels for classification analysis. ISA produced indicator values for each species across different cluster group levels (ranging from 2 to 50), testing for statistical significance using a quantitative/binary response with 4999 randomizations (Dufrêne and Legendre 1997). The cluster group levels that had relatively high numbers of significant indicators and relatively low overall mean pvalues were chosen for the final evaluation of the community classification (McCune and Grace 2002).","Classification analyses were performed using agglomerative Cluster Analysis and TWINSPAN in a complementary approach to objectively classify the samples and to create order out of complex vegetation patterns in the data.  The main groups were defined by similarities in species composition and abundance.  Through this process, a classification of the different natural communities or vegetation types can be scientifically made, based mainly on floristic and secondarily on environmental factors.  When different analyses show similar results, they substantiate each other, providing a consistent, strong analysis (Gauch 1982, Parker 1991).","Cluster Analysis, Indicator Species Analysis","Surveys were assigned vegetation names using conventions used the floristic units of \"associations,\" as defined by the NVCS, International Vegetation Classification system (HRWG 2012),  and existing rules from A Manual of California Vegetation (Sawyer et al. 2009), or the Vegetation Classification Manual for Western San Diego County (Sproul et al. 2011) as appropriate.","See: Classification of the Vegetation Alliances and Associations of Sonoma County, California, Volume 1 of 2 - Introduction, Methods, and Results (http://nrm.dfg.ca.gov/FileHandler.ashx?DocumentID=115807)","See: Classification of the Vegetation Alliances and Associations of Sonoma County, California, Volume 1 of 2 - Introduction, Methods, and Results (http://nrm.dfg.ca.gov/FileHandler.ashx?DocumentID=115807)","Final classification will be based on data collected by GIC and Santa Clara/Cruz sampling efforts as well as previously classified regional data (ex. San Mateo county data)","Not formally classified","a first-order cluster analysis was used to partition the dataset into more manageable subsets. The subsets were then reanalyzed using Cluster Analysis. This process is known as progressive fragmentation. After the Cluster Analysis runs, Indicator Species Analysis (ISA) was employed","These data were analyzed using a number of statistical methods, chiefly an agglomerative hierarchical cluster analysis. The results of these analyses defined the number of distinct vegetation types sampled, and when compared to existing datasets maintaine"],["PC-Ord, cluster analysis for RA/Releves, AAs were keyed",null,"PC-ORD","COMPCLUS to a small degree and TWINSPAN  was more heavily relied upon",null,"PC-ORD","2022",null,"PC-ORD","PC-ORD version 5 software",null,"PCOrd and R",null,"PC-ORD",null,"keyed","PC-ORD","PC-ORD","PC-ORD","PC-ORD",null,"PC-ORD","PC-ORD (McCune and Mefford, 1997)","keyed",null,null,"PC Ord, R Stats","PC-ORD","PC-ORD",null,"PC-ORD 6.08","PC-ORD 6.08","Initially San Mateo draft vegetation classification",null,"PC-ORD",null],["multiVariateAnalysis, inspection","multiVariateAnalysis","multiVariateAnalysis","multiVariateAnalysis","inspection","multiVariateAnalysis","inspection","inspection","multiVariateAnalysis","multiVariateAnalysis","inspection","multiVariateAnalysis",null,"multiVariateAnalysis","inspection","inspection","multiVariateAnalysis","multiVariateAnalysis","multiVariateAnalysis","multiVariateAnalysis","inspection","multiVariateAnalysis","multiVariateAnalysis","inspection","inspection","inspection","multiVariateAnalysis","multiVariateAnalysis","multiVariateAnalysis","inspection","multiVariateAnalysis","multiVariateAnalysis","inspection",null,"multiVariateAnalysis","multiVariateAnalysis"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>ProjectCode<\/th>\n      <th>ClassificationDescription<\/th>\n      <th>ClassificationTool<\/th>\n      <th>vegbank_method<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<button class="btn btn-primary" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,UHJvamVjdENvZGU7Q2xhc3NpZmljYXRpb25EZXNjcmlwdGlvbjtDbGFzc2lmaWNhdGlvblRvb2w7dmVnYmFua19tZXRob2QKQUxDQztDbGFzc2lmaWVkIG5ldyBhbmQgbGVnYWN5IHN1cnZleXMgd2l0aGluIHRoZSB0d28gY291bnRpZXMgYXMgd2VsbCBhcyB0aG9zZSB0aGF0IHdlcmUgaW4gYWRqYWNlbnQgY291bnRpZXMgd2l0aGluIHRoZSBzYW1lIGVjb3JlZ2lvbiBzdWJzZWN0aW9ucy4gIFN1cnZleXMgdGhhdCB3ZXJlIGNsYXNzaWZpZWQgYnV0IG5vdCBpbmNsdWRlZCBpbiB0aGUgdmVnZXRhdGlvbiBkZXNjcmlwdGlvbnMgYXJlIGdpdmVuIHRoZSBjbGFzc2lmaWNhdGlvbiBjb2RlIEFMQ0NhZGo7UEMtT3JkLCBjbHVzdGVyIGFuYWx5c2lzIGZvciBSQS9SZWxldmVzLCBBQXMgd2VyZSBrZXllZDttdWx0aVZhcmlhdGVBbmFseXNpcywgaW5zcGVjdGlvbgpBTENDLUdSO0NsYXNzaWZpZWQgbmV3IGFuZCBsZWdhY3kgc3VydmV5cyB3aXRoaW4gdGhlIHR3byBjb3VudGllcyBhcyB3ZWxsIGFzIHRob3NlIHRoYXQgd2VyZSBpbiBhZGphY2VudCBjb3VudGllcyB3aXRoaW4gdGhlIHNhbWUgZWNvcmVnaW9uIHN1YnNlY3Rpb25zLiAgU3VydmV5cyB0aGF0IHdlcmUgY2xhc3NpZmllZCBidXQgbm90IGluY2x1ZGVkIGluIHRoZSB2ZWdldGF0aW9uIGRlc2NyaXB0aW9ucyBhcmUgZ2l2ZW4gdGhlIGNsYXNzaWZpY2F0aW9uIGNvZGUgQUxDQ2FkajtOQTttdWx0aVZhcmlhdGVBbmFseXNpcwpBTFNDOyJUaGUgUEMtT1JEIHNvZnR3YXJlIHN1aXRlIG9mIGNsYXNzaWZpY2F0aW9uIGFuZCBvcmRpbmF0aW9uIHRvb2xzIHdhcyB1c2VkIHRvIGdlbmVyYXRlIG11bHRpdmFyaWF0ZSBhbmFseXNlcyBzdWNoIGFzIENsdXN0ZXIgQW5hbHlzaXMgYW5kIEluZGljYXRvciBTcGVjaWVzIEFuYWx5c2lzIChNY0N1bmUgYW5kIE1lZmZvcmQgMTk5NykuIFRoZXNlIGFuYWx5c2VzIHdlcmUgZW1wbG95ZWQgdG8gb3JkZXIgdmVnZXRhdGlvbiBzdXJ2ZXlzIGludG8gZ3JvdXBzIHJlbGF0ZWQgYnkgdGhlaXIgc3BlY2llcyBjb21wb3NpdGlvbiBhbmQKYWJ1bmRhbmNlLCBzbyB0aGF0IGEgZm9ybWFsaXplZCBjbGFzc2lmaWNhdGlvbiBvZiBjb21tdW5pdHkgdHlwZXMgd291bGQgYmUgY3JlYXRlZC4iO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpBTlpBO0NPTVBDTFVTIHdhcyB1c2VkIHRvIHNlZSB0aGUgc2ltaWxhcml0eSBvZiBwbG90cyB1c2luZyBhIHByZWRldGVybWluZWQgbnVtYmVyIG9mIHNlZWQgcGxvdHMuICBUV0lOU1BBTiB3YXMgcnVuIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgZmluYWwgY2xhc3NpZmljYXRpb24uICBPbmUgd2hlcmUgc3BlY2llcyB2YWx1ZXMgd2VyZSBhbGwgcmVsYXRpdml6ZWQsIGFub3RoZXIgd2hlcmUgc3BlY2llcyB3ZXJlIHNldCB0byBwcmVzZW5jZS9hYnNlbmNlLCByZWR1Y2VkIHRvIGp1c3QgYSBmZXcgY292ZXIgY2xhc3NlcywgYWxzbyB0cmllZCByZW1vdmluZyBhbmQgaW5jbHVkaW5nIHJhcmUgc3BlY2llcy4gVGhlIGZpbmFsIHdhcyBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIHNldHRpbmdzIDEyIGRpdmlzaW9ucywgcHNldWRvLXNwZWNpZXMgY3V0IHZhbHVlcyBzZXQgdG8gbWF0Y2ggY292ZXIgY2xhc3MgaW50ZXJ2YWxzIGluIHRoZSBmaWVsZCBmb3JtcywgYW5kIG5vIHdlaWdodGluZyBvbiBhbnkgY2xhc3MuO0NPTVBDTFVTIHRvIGEgc21hbGwgZGVncmVlIGFuZCBUV0lOU1BBTiAgd2FzIG1vcmUgaGVhdmlseSByZWxpZWQgdXBvbjttdWx0aVZhcmlhdGVBbmFseXNpcwpDQVZBO3N1cnZleXMgd2VyZSBrZXllZCB1c2luZyB0aGUgQ2Fycml6byBjbGFzc2lmaWNhdHJpb24gYW5kIHRoZSBNQ1YgdG8gc3VwcG9ydCBtYXBwaW5nO05BO2luc3BlY3Rpb24KQ1ZQQTtDbHVzdGVyIEFuYWx5c2lzLCBJbmRpY2F0b3IgU3BlY2llcyBBbmFseXNpcztQQy1PUkQ7bXVsdGlWYXJpYXRlQW5hbHlzaXMKQ1ZQQUE7VGhlc2UgZGF0YSB3aWxsIGJlIGNvbXBpbGVkIHdpdGggb3RoZXIgQ2llcnZvLVBhbm9jaGUgc291dGggc3VydmV5cyBhbmQgY28tYW5hbHl6ZWQuOzIwMjI7aW5zcGVjdGlvbgpEUkVDUDtWZWdldGF0aW9uIHdhcyBtYXBwZWQgdXNpbmcga2V5cyBkZXZlbG9wZWQgZm9yIHRoZSBDZW50cmFsIE1vamF2ZSBjbGFzc2lmaWNhdGlvbiwgSm9zaHVhIFRyZWUgTmF0aW9uYWwgUGFyaywgQW56YSBCb3JyZWdvIFN0YXRlIFBhcmssIGFuZCB3YXMgYWRwYXRlZCBiYXNlZCBvbiByZWNvbiwgYWEsIGFuZCByYXBpZCBhc3Nlc3NtZW50IGFzIHRoZSBwcm9qZWN0IGV4YW5kZWQgaW50byBuZXcgYXJlYXMuO05BO2luc3BlY3Rpb24KRUJBWTtDbHVzdGVyIEFuYWx5c2lzLCBJbmRpY2F0b3IgU3BlY2llcyBBbmFseXNpcztQQy1PUkQ7bXVsdGlWYXJpYXRlQW5hbHlzaXMKRklTSDsiU2VlICIiVmVnZXRhdGlvbiBNYXAgYW5kIENsYXNzaWZpY2F0aW9uIG9mIEZpc2ggU2xvdWdoLCBJbnlvIGFuZCBNb25vIENvdW50aWVzLCBDYWxpZm9ybmlhLCIiIChodHRwOi8vbnJtLmRmZy5jYS5nb3YvRmlsZUhhbmRsZXIuYXNoeD9Eb2N1bWVudElEPTc2NTMwKSI7UEMtT1JEIHZlcnNpb24gNSBzb2Z0d2FyZTttdWx0aVZhcmlhdGVBbmFseXNpcwpGTldTO1VzZWQgdGhlIGtleSBmcm9tIHRoZSBWZWdldGF0aW9uIG9mIFdlc3Rlcm4gU2FuIERpZWdvIHRvIGtleSBlYWNoIHBsb3QgdG8gdGhlIGFzc29jaWF0aW9uIGxldmVsLjtOQTtpbnNwZWN0aW9uCkhVQkI7TkE7UENPcmQgYW5kIFI7bXVsdGlWYXJpYXRlQW5hbHlzaXMKSk9NVTtBIGZvcm1hbCBzaXRlLXNwZWNpZmljIGNsYXNzaWZpY2F0aW9uIHVzaW5nIG9yZGluYXRpb24gd2FzIG5vdCBwZXJmb3JtZWQgYW5kIHRoZSBwbGFudCBjb21tdW5pdGllcyBhcmUgbm90IGZ1bGx5IGRlc2NyaWJlZC47TkE7TkEKS05PWDtUaGVzZSBkYXRhIHdlcmUgYW5hbHl6ZWQgdXNpbmcgbXVsdGl2YXJpYXRlIGNsdXN0ZXIgYW5hbHlzaXMsIHBlcmZvcm1lZCBieSBQQy1PUkQgdmVyc2lvbiA2IHNvZnR3YXJlLiBUaGUgY2x1c3RlciBhbmFseXNpcyB3YXMgYmFzZWQgb24gYWJ1bmRhbmNlIChjb3ZlciB2YWx1ZXMpIGNvbnZlcnRlZCB0byBzZXZlbiBkaWZmZXJlbnQgY2xhc3NlcyB1c2luZyB0aGUgZm9sbG93aW5nIG1vZGlmaWVkIEJyYXVuLUJsYW5xdWV0dGUgKDE5MzIpIGNvdmU7UEMtT1JEO211bHRpVmFyaWF0ZUFuYWx5c2lzCkxMTkw7Q2xhc3NpZmllZCB3aXRoIEFMQ0MgcHJvamVjdDtOQTtpbnNwZWN0aW9uClBJTUU7TkE7a2V5ZWQ7aW5zcGVjdGlvbgpQT1JFO1RXSU5TUEFOIGFuZCBDbHVzdGVyIEFuYWx5c2lzO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpQU01BO05BO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpQVlBMQztEYXRhIHdhcyBydW4gdGhyb3VnaCBhIGNsdXN0ZXIgYW5hbHlzaXMgdXNpbmcgc3BlY2llcyBhYnVuZGFuY2UgKGNvdmVyKSBjb252ZXJ0ZWQgdG8gc2V2ZW4gY2xhc3NlcywgdG8gaWRlbnRpZnkgcGF0dGVybnMgYW5kIGdyb3VwcyBpbiB0aGUgZGF0YS4gVGhlIGRhdGEgYWxzbyB3ZXJlIGNvbXBhcmVkIHRvIGV4aXN0aW5nIGNsYXNzaWZpY2F0aW9ucyBpbiBzb3V0aGVybiBDYWxpZm9ybmlhIFZlZ2V0YXRpb24gcmVzb3VyY2VzIHdlcmUgYXNzZXNzZWQgdGhyb3VnaCBmaWVsZCBzdXJ2ZXlzLCByZXN1bHRpbmcgaW4gdGhlIGNsYXNzaWZpY2F0aW9uIGFuYWx5c2lzIG9mIDI2IHZlZ2V0YXRpb24gYWxsaWFuY2VzLCAzOCB2ZWdldGF0aW9uIGFzc29jaWF0aW9ucyBvciBzZW1pLW5hdHVyYWwgc3RhbmRzO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpQWUdNO05BO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpSTkNNO0RhdGEgZm9yIHRoaXMgcHJvamVjdCBpcyBhIGNvbXBpbGF0aW9uIG9mIGV4aXN0aW5nIGRhdGEgbm90IGNsYXNzaWZpZWQgYnkgb3RoZXIgcHJvamVjdHMuIE5WQ1MgbmFtZXMgaGF2ZSBiZWVuIGdpdmVuIGJ5IGtleWluZyB0aGUgdmVnZXRhdGlvbiB1c2luZyB0aGUgbW9zdCBhcHByb3ByaWF0ZSBleGlzdGluZyB2ZWdldGF0aW9uIGtleXMuO05BO2luc3BlY3Rpb24KU0FDVDtDbHVzdGVyIEFuYWx5c2lzLCBJbmRpY2F0b3IgU3BlY2llcyBBbmFseXNpcztQQy1PUkQ7bXVsdGlWYXJpYXRlQW5hbHlzaXMKU0FNTzsiVXNpbmcgcHJvZ3JhbXMgc3VjaCBhcyBUV0lOU1BBTiAoSGlsbCAxOTc5KSwgY2x1c3RlciBhbmFseXNpcywgYW5kIG9yZGluYXRpb24gKE1jQ3VuZSBhbmQgTWVmZm9yZCAxOTk3KSwgZ3JvdXBzIGFyZSBkZWZpbmVkIGJ5IHNpbWlsYXJpdGllcyBpbiBzcGVjaWVzIGNvbXBvc2l0aW9uIGFuZCBhYnVuZGFuY2UuIFNpbmNlIHBsYW50IGNvbW11bml0eSBkYXRhc2V0cyBhcmUgaW5oZXJlbnRseSBjb21wbGV4IGFuZCBtb3JlIHRoYW4gb25lIGVudmlyb25tZW50YWwgYXhpc2RldGVybWluZXMgdGhlIGhldGVyb2dlbmVpdHkgaW4gcGxhbnQgcGF0dGVybnMsIGEgaGllcmFyY2hpY2FsIGFnZ2xvbWVyYXRpdmUgY2x1c3RlciBhbmFseXNpcyB0ZWNobmlxdWUgd2FzIGVtcGxveWVkIHdpdGggU29yZW5zb24gZGlzdGFuY2UgYW5kIGZsZXhpYmxlIGJldGEgbGlua2FnZSBtZXRob2QgYXQgLTAuMjUgKE1jQ3VuZSBhbmQgR3JhY2UgMjAwMikuIFRoZSBjbHVzdGVyIGFuYWx5c2lzCnRlY2huaXF1ZSB3YXMgYmFzZWQgb24gYWJ1bmRhbmNlIChjb3ZlcikgdmFsdWVzIGNvbnZlcnRlZCB0byBzZXZlbiBkaWZmZXJlbnQgY2xhc3NlcyB1c2luZyB0aGUgZm9sbG93aW5nIG1vZGlmaWVkIEJyYXVuLUJsYW5xdWV0ICgxOTMyLzE5NTEpIGNvdmVyIGNhdGVnb3JpZXM6IDEgPSA8IDElLCAyID0gMeKAkzUlLCAzID0gPiA14oCTMTUlLCA0ID0gPiAxNeKAkzI1JSwgNSA9ID4gMjXigJM1MCUsIDYgPSA+IDUw4oCTNzUlLCA3ID0gPiA3NSUuIFRoZSBtYWpvcml0eSBvZiB0aGUgc3BlY2llcyB2YWx1ZXMgZmVsbCB3aXRoaW4gdGhlIGZpcnN0IGZvdXIgY292ZXIgY2xhc3Nlcy4iO1BDLU9SRCAoTWNDdW5lIGFuZCBNZWZmb3JkLCAxOTk3KTttdWx0aVZhcmlhdGVBbmFseXNpcwpTQlZXQ0Q7QSBwcmVsaW1pbmFyeSBhc3NpZ25tZW50IHdhcyBtYWRlIGluIHRoZSBmaWVsZCBkdXJpbmcgcGxvdCBkYXRhIGNvbGxlY3Rpb24gdXNpbmcgcHVibGlzaGVkIE1DViBtZW1iZXJzaGlwIHJ1bGVzLiBCYXNlZCBvbiBwcmVsaW1pbmFyeSBmaWVsZCBhc3NpZ25tZW50cywgYSByZWdpb25hbCBkYXRhc2V0IGNvbnRhaW5pbmcgYXBwcm94aW1hdGVseSAyMjAgYWRkaXRpb25hbCByZWxldmFudCBwbG90cyBmcm9tIGZvcm1hbGx5IGNsYXNzaWZpZWQgcmVsZXbDqSBhbmQgUmFwaWQgQXNzZXNzbWVudCBzdXJ2ZXlzIHdhcyBjb21waWxlZCBmcm9tIHRoZSBWRUdDQU1QIGRhdGFiYXNlLiBTcGVjaWVzIGNvbXBvc2l0aW9uIGFuZCBjb3ZlciBkYXRhIGZvciBlYWNoIFNCVldDRCBwbG90IHdhcyBldmFsdWF0ZWQgYnkgY29tcGFyaXNvbiB0byBzcGVjaWVzIGNvbXBvc2l0aW9uIGFuZCBjb3ZlciB2YWx1ZXMgb2YgYWxsIHJlZ2lvbmFsIHBsb3RzLiBLZXlzIGZyb20gcmVsZXZhbnQgcmVnaW9uYWwgcmVwb3J0cyB3ZXJlIGFsc28gcmV2aWV3ZWQgZm9yIHBsb3QgYXNzaWdubWVudC4gRm9sbG93aW5nIHRoaXMgZGV0YWlsZWQgY29tcGFyaXNvbiwgYW4gYWxsaWFuY2UgYW5kIGFzc29jaWF0aW9uIHdhcyBhc3NpZ25lZCB0byBlYWNoIGluIGFjY29yZGFuY2Ugd2l0aCBwdWJsaXNoZWQgYW5kL29yIENERlctdmV0dGVkIG1lbWJlcnNoaXAgY3JpdGVyaWEuO2tleWVkO2luc3BlY3Rpb24KU0NSO1N0YW5kcyB3ZXJlIGtleWVkIGJhc2VkIG9uIGluZm9ybWF0aW9uIGluIHRoZSBNQ1YgYW5kIG90aGVyIFNvdXRoZXJuIENhbGlmb3JuaWEgcHJvamVjdHM7TkE7aW5zcGVjdGlvbgpTQ1JVWjtTZWUgZGVzY3JpcHRpb24gdW5kZXIgdGhlIFNDU0MgcHJvamVjdDtOQTtpbnNwZWN0aW9uClNDU0M7IkNOUFMgYW5hbHl6ZWQgdGhlIHNwZWNpZXMgY292ZXIgZGF0YSB1c2luZyBQQy1PcmQgYW5kIFIgc29mdHdhcmUgKE1jQ3VuZSBhbmQgTWVmZm9yZCAyMDA2LCBSIENvcmUgVGVhbSAyMDEzKS4gVGhlIGNsdXN0ZXIgYW5hbHlzaXMgdXNlZCB0aGUgU8O4cmVuc2VuIERpc3RhbmNlIE1lYXN1cmUgYW5kIEZsZXhpYmxlIEJldGEgTGlua2FnZSBtZXRob2QgYXQgLTAuMjUgKE1jQ3VuZSBhbmQgR3JhY2UgMjAwMikuIFVzaW5nIHRoaXMgbWV0aG9kIG9mIGFnZ2xvbWVyYXRpdmUgY2x1c3RlcmluZywgc3VydmV5cyB3ZXJlIGdyb3VwZWQgdG9nZXRoZXIgYmFzZWQgb24gc2ltaWxhcml0aWVzIGluIHNwZWNpZXMgY29tcG9zaXRpb24gYW5kIGFidW5kYW5jZSAoTWNDdW5lIGFuZCBNZWZmb3JkIDE5OTcpLiBDTlBTIGNvbmR1Y3RlZCBhbiBpbml0aWFsIGNsdXN0ZXIgYW5hbHlzaXMgaW5jbHVkaW5nIGFsbCBzdXJ2ZXlzIGluIHRoZSBhdmFpbGFibGUgZGF0YXNldC4gVGhlIGluaXRpYWwgY2x1c3RlciBhbmFseXNpcyB3YXMgcGVyZm9ybWVkIHRvIHBhcnRpdGlvbiB0aGUgZGF0YXNldAppbnRvIG1hbmFnZWFibGUgc3Vic2V0cy4gSW5kaWNhdG9yIHNwZWNpZXMgYW5hbHlzaXMgKElTQSkgd2FzIHVzZWQgdG8gc2VsZWN0IGNsdXN0ZXIgZ3JvdXAgbGV2ZWxzIGZvciBjbGFzc2lmaWNhdGlvbiBhbmFseXNpcy4gSVNBIHByb2R1Y2VkIGluZGljYXRvciB2YWx1ZXMgZm9yIGVhY2ggc3BlY2llcyBhY3Jvc3MgZGlmZmVyZW50IGNsdXN0ZXIgZ3JvdXAgbGV2ZWxzIChyYW5naW5nIGZyb20gMiB0byA1MCksIHRlc3RpbmcgZm9yIHN0YXRpc3RpY2FsIHNpZ25pZmljYW5jZSB1c2luZyBhIHF1YW50aXRhdGl2ZS9iaW5hcnkgcmVzcG9uc2Ugd2l0aCA0OTk5IHJhbmRvbWl6YXRpb25zIChEdWZyw6puZSBhbmQgTGVnZW5kcmUgMTk5NykuIFRoZSBjbHVzdGVyIGdyb3VwIGxldmVscyB0aGF0IGhhZCByZWxhdGl2ZWx5IGhpZ2ggbnVtYmVycyBvZiBzaWduaWZpY2FudCBpbmRpY2F0b3JzIGFuZCByZWxhdGl2ZWx5IGxvdyBvdmVyYWxsIG1lYW4gcHZhbHVlcyB3ZXJlIGNob3NlbiBmb3IgdGhlIGZpbmFsIGV2YWx1YXRpb24gb2YgdGhlIGNvbW11bml0eSBjbGFzc2lmaWNhdGlvbiAoTWNDdW5lIGFuZCBHcmFjZSAyMDAyKS4iO1BDIE9yZCwgUiBTdGF0czttdWx0aVZhcmlhdGVBbmFseXNpcwpTRlZXO0NsYXNzaWZpY2F0aW9uIGFuYWx5c2VzIHdlcmUgcGVyZm9ybWVkIHVzaW5nIGFnZ2xvbWVyYXRpdmUgQ2x1c3RlciBBbmFseXNpcyBhbmQgVFdJTlNQQU4gaW4gYSBjb21wbGVtZW50YXJ5IGFwcHJvYWNoIHRvIG9iamVjdGl2ZWx5IGNsYXNzaWZ5IHRoZSBzYW1wbGVzIGFuZCB0byBjcmVhdGUgb3JkZXIgb3V0IG9mIGNvbXBsZXggdmVnZXRhdGlvbiBwYXR0ZXJucyBpbiB0aGUgZGF0YS4gIFRoZSBtYWluIGdyb3VwcyB3ZXJlIGRlZmluZWQgYnkgc2ltaWxhcml0aWVzIGluIHNwZWNpZXMgY29tcG9zaXRpb24gYW5kIGFidW5kYW5jZS4gIFRocm91Z2ggdGhpcyBwcm9jZXNzLCBhIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBkaWZmZXJlbnQgbmF0dXJhbCBjb21tdW5pdGllcyBvciB2ZWdldGF0aW9uIHR5cGVzIGNhbiBiZSBzY2llbnRpZmljYWxseSBtYWRlLCBiYXNlZCBtYWlubHkgb24gZmxvcmlzdGljIGFuZCBzZWNvbmRhcmlseSBvbiBlbnZpcm9ubWVudGFsIGZhY3RvcnMuICBXaGVuIGRpZmZlcmVudCBhbmFseXNlcyBzaG93IHNpbWlsYXIgcmVzdWx0cywgdGhleSBzdWJzdGFudGlhdGUgZWFjaCBvdGhlciwgcHJvdmlkaW5nIGEgY29uc2lzdGVudCwgc3Ryb25nIGFuYWx5c2lzIChHYXVjaCAxOTgyLCBQYXJrZXIgMTk5MSkuO1BDLU9SRDttdWx0aVZhcmlhdGVBbmFseXNpcwpTSlY7Q2x1c3RlciBBbmFseXNpcywgSW5kaWNhdG9yIFNwZWNpZXMgQW5hbHlzaXM7UEMtT1JEO211bHRpVmFyaWF0ZUFuYWx5c2lzClNOSTsiU3VydmV5cyB3ZXJlIGFzc2lnbmVkIHZlZ2V0YXRpb24gbmFtZXMgdXNpbmcgY29udmVudGlvbnMgdXNlZCB0aGUgZmxvcmlzdGljIHVuaXRzIG9mICIiYXNzb2NpYXRpb25zLCIiIGFzIGRlZmluZWQgYnkgdGhlIE5WQ1MsIEludGVybmF0aW9uYWwgVmVnZXRhdGlvbiBDbGFzc2lmaWNhdGlvbiBzeXN0ZW0gKEhSV0cgMjAxMiksICBhbmQgZXhpc3RpbmcgcnVsZXMgZnJvbSBBIE1hbnVhbCBvZiBDYWxpZm9ybmlhIFZlZ2V0YXRpb24gKFNhd3llciBldCBhbC4gMjAwOSksIG9yIHRoZSBWZWdldGF0aW9uIENsYXNzaWZpY2F0aW9uIE1hbnVhbCBmb3IgV2VzdGVybiBTYW4gRGllZ28gQ291bnR5IChTcHJvdWwgZXQgYWwuIDIwMTEpIGFzIGFwcHJvcHJpYXRlLiI7TkE7aW5zcGVjdGlvbgpTT05PO1NlZTogQ2xhc3NpZmljYXRpb24gb2YgdGhlIFZlZ2V0YXRpb24gQWxsaWFuY2VzIGFuZCBBc3NvY2lhdGlvbnMgb2YgU29ub21hIENvdW50eSwgQ2FsaWZvcm5pYSwgVm9sdW1lIDEgb2YgMiAtIEludHJvZHVjdGlvbiwgTWV0aG9kcywgYW5kIFJlc3VsdHMgKGh0dHA6Ly9ucm0uZGZnLmNhLmdvdi9GaWxlSGFuZGxlci5hc2h4P0RvY3VtZW50SUQ9MTE1ODA3KTtQQy1PUkQgNi4wODttdWx0aVZhcmlhdGVBbmFseXNpcwpTT05PYWRqO1NlZTogQ2xhc3NpZmljYXRpb24gb2YgdGhlIFZlZ2V0YXRpb24gQWxsaWFuY2VzIGFuZCBBc3NvY2lhdGlvbnMgb2YgU29ub21hIENvdW50eSwgQ2FsaWZvcm5pYSwgVm9sdW1lIDEgb2YgMiAtIEludHJvZHVjdGlvbiwgTWV0aG9kcywgYW5kIFJlc3VsdHMgKGh0dHA6Ly9ucm0uZGZnLmNhLmdvdi9GaWxlSGFuZGxlci5hc2h4P0RvY3VtZW50SUQ9MTE1ODA3KTtQQy1PUkQgNi4wODttdWx0aVZhcmlhdGVBbmFseXNpcwpTUENDO0ZpbmFsIGNsYXNzaWZpY2F0aW9uIHdpbGwgYmUgYmFzZWQgb24gZGF0YSBjb2xsZWN0ZWQgYnkgR0lDIGFuZCBTYW50YSBDbGFyYS9DcnV6IHNhbXBsaW5nIGVmZm9ydHMgYXMgd2VsbCBhcyBwcmV2aW91c2x5IGNsYXNzaWZpZWQgcmVnaW9uYWwgZGF0YSAoZXguIFNhbiBNYXRlbyBjb3VudHkgZGF0YSk7SW5pdGlhbGx5IFNhbiBNYXRlbyBkcmFmdCB2ZWdldGF0aW9uIGNsYXNzaWZpY2F0aW9uO2luc3BlY3Rpb24KV0xLUjtOb3QgZm9ybWFsbHkgY2xhc3NpZmllZDtOQTtOQQpXUklWO2EgZmlyc3Qtb3JkZXIgY2x1c3RlciBhbmFseXNpcyB3YXMgdXNlZCB0byBwYXJ0aXRpb24gdGhlIGRhdGFzZXQgaW50byBtb3JlIG1hbmFnZWFibGUgc3Vic2V0cy4gVGhlIHN1YnNldHMgd2VyZSB0aGVuIHJlYW5hbHl6ZWQgdXNpbmcgQ2x1c3RlciBBbmFseXNpcy4gVGhpcyBwcm9jZXNzIGlzIGtub3duIGFzIHByb2dyZXNzaXZlIGZyYWdtZW50YXRpb24uIEFmdGVyIHRoZSBDbHVzdGVyIEFuYWx5c2lzIHJ1bnMsIEluZGljYXRvciBTcGVjaWVzIEFuYWx5c2lzIChJU0EpIHdhcyBlbXBsb3llZDtQQy1PUkQ7bXVsdGlWYXJpYXRlQW5hbHlzaXMKV1NEO1RoZXNlIGRhdGEgd2VyZSBhbmFseXplZCB1c2luZyBhIG51bWJlciBvZiBzdGF0aXN0aWNhbCBtZXRob2RzLCBjaGllZmx5IGFuIGFnZ2xvbWVyYXRpdmUgaGllcmFyY2hpY2FsIGNsdXN0ZXIgYW5hbHlzaXMuIFRoZSByZXN1bHRzIG9mIHRoZXNlIGFuYWx5c2VzIGRlZmluZWQgdGhlIG51bWJlciBvZiBkaXN0aW5jdCB2ZWdldGF0aW9uIHR5cGVzIHNhbXBsZWQsIGFuZCB3aGVuIGNvbXBhcmVkIHRvIGV4aXN0aW5nIGRhdGFzZXRzIG1haW50YWluZTtOQTttdWx0aVZhcmlhdGVBbmFseXNpcwo=');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'method_lookup_map.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() => {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  " path="cdfw_method_lookup_mappings.csv" has_icon="TRUE"><i class="fa fa-download"></i> Download Method Lookup Mappings as CSV</button>
</div>
</div>
</section>
<section id="class-confidence" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="class-confidence"><span class="header-section-number">6.3</span> Class Confidence</h3>
<p>Confidence values from the <code>Confidence_ID</code> field are normalized to three categories: “High”, “Medium” and “Low”. The function handles multiple input formats including single letters (H, M, L), full words (High, Medium, Low), and percentage values. Percentages of 75% or greater are mapped to “High”, while values below 75% are mapped to “Medium”. Missing value indicators are converted to NA. Any unparse-able or unexpected confidence values trigger warnings. The confidence identifiers and percentages are mapped below.</p>
</section>
<section id="community-concept-matching" class="level3" data-number="6.4">
<h3 data-number="6.4" class="anchored" data-anchor-id="community-concept-matching"><span class="header-section-number">6.4</span> Community Concept Matching</h3>
<p>Community concepts are downloaded from the VegBank API and cached locally. Only currently accepted concepts are used for matching. California vegetation codes (<code>CaCode</code>) from the CDFW data are matched to NVC (National Vegetation Classification) codes using a crosswalk table (<code>VegBank_CrosswalkHierarchyMCV.csv</code>). NVC codes are then matched to VegBank community concept codes (<code>cc_code</code>). For CaCodes that map to multiple NVC codes, only the first mapping is used to prevent row duplication, although a warning is issued. The total count of unmatched records is reported via warning message. Attached below is the matching process workflow.</p>
<p>Duplicated CaCode from the <code>VegBank_CrosswalkHierarchyMCV.csv</code> file are shown below.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5f745f904fd175e31f0b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5f745f904fd175e31f0b">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["21.310.00","21.310.00","32.037.00","32.037.00","33.020.00","33.020.00","35.110.00","35.110.00","35.111.00","35.111.00","35.150.00","35.150.00","35.310.00","35.310.00","36.310.00","36.310.00","36.400.00","36.400.00","36.400.00","37.070.00","37.070.00","37.323.00","37.323.00","38.125.00","38.125.00","41.200.00","41.200.00","41.251.00","41.251.00","41.251.00","42.043.00","42.043.00","45.164.00","45.164.00","45.166.00","45.166.00","45.178.00","45.178.00","45.232.00","45.232.00","45.405.00","45.405.00","52.121.00","52.121.00","52.124.00","52.124.00","52.124.00","52.205.00","52.205.00","61.111.00","61.111.00","61.130.00","61.130.00","61.201.00","61.201.00","61.209.00","61.209.00","61.420.00","61.420.00","61.460.00","61.460.00","61.460.00","61.565.00","61.565.00","61.810.00","61.810.00","63.910.00","63.910.00","71.030.00","71.030.00","74.100.00","74.100.00","74.100.00","76.100.00","76.100.00","81.100.00","81.100.00","81.200.00","81.200.00","83.100.00","83.100.00","83.200.00","83.200.00","83.200.00","84.100.00","84.100.00","84.200.00","84.200.00","84.200.00","87.080.00","87.080.00","87.170.00","87.170.00","87.206.00","87.206.00","88.200.00","88.200.00"],["21.310.00","21.310.00","32.037.00","32.037.00","33.020.00","33.020.00","35.110.00","35.110.00","35.111.00","35.111.00","35.150.00","35.150.00","35.310.00","35.310.00","36.310.00","36.310.00","36.400.00","36.400.00","36.400.00","37.070.00","37.070.00","37.323.00","37.323.00","38.125.00","38.125.00","41.200.00","41.200.00","41.251.00","41.251.00","41.251.00","42.043.00","42.043.00","45.164.00","45.164.00","45.166.00","45.166.00","45.178.00","45.178.00","45.232.00","45.232.00","45.405.00","45.405.00","52.121.00","52.121.00","52.124.00","52.124.00","52.124.00","52.205.00","52.205.00","61.111.00","61.111.00","61.130.00","61.130.00","61.201.00","61.201.00","61.209.00","61.209.00","61.420.00","61.420.00","61.460.00","61.460.00","61.460.00","61.565.00","61.565.00","61.810.00","61.810.00","63.910.00","63.910.00","71.030.00","71.030.00","74.100.00","74.100.00","74.100.00","76.100.00","76.100.00","81.100.00","81.100.00","81.200.00","81.200.00","83.100.00","83.100.00","83.200.00","83.200.00","83.200.00","84.100.00","84.100.00","84.200.00","84.200.00","84.200.00","87.080.00","87.080.00","87.170.00","87.170.00","87.206.00","87.206.00","88.200.00","88.200.00"],["A1614","A0822","A1568","A1107","A3144","A3220","A3198","A3194","A3208","A3207","A2557","A3200","A3196","A3266","A0869","A3266","A2507","A1046","A0834","A3886","A2672","A3859","A3865","A4023","A4101","A1332","A3900","A3899","A3739","A4210","A3872","A3255","A3832","A2514","A3437","A3599","A3435","A3806","A3807","A3891","A3364","A3831","A3804","A3805","A3926","A1747","A3927","A3849","A3255","A3760","A2036","A0644","A3803","A0977","A3878","A0947","A3800","A3777","A0306","A0427","A3753","A3745","A3973","A1033","A3750","A0618","A2609","A0836","A3327","A3328","A3346","A0106","A3750","A0587","A3792","A3606","A0104","A3728","A3727","A3757","A3614","A3608","A3607","A3604","A3620","A3617","A3378","A3379","A3377","A3758","A3621","A3620","A3622","A3673","A3672","A3678","A3619"],["a1614","a0822","a1568","a1107","a3144","a3220","a3198","a3194","a3208","a3207","a2557","a3200","a3196","a3266","a0869","a3266","a2507","a1046","a0834","a3886","a2672","a3859","a3865","a4023","a4101","a1332","a3900","a3899","a3739","a4210","a3872","a3255","a3832","a2514","a3437","a3599","a3435","a3806","a3807","a3891","a3364","a3831","a3804","a3805","a3926","a1747","a3927","a3849","a3255","a3760","a2036","a0644","a3803","a0977","a3878","a0947","a3800","a3777","a0306","a0427","a3753","a3745","a3973","a1033","a3750","a0618","a2609","a0836","a3327","a3328","a3346","a0106","a3750","a0587","a3792","a3606","a0104","a3728","a3727","a3757","a3614","a3608","a3607","a3604","a3620","a3617","a3378","a3379","a3377","a3758","a3621","a3620","a3622","a3673","a3672","a3678","a3619"],["Eriophyllum staechadifolium – Erigeron glaucus – Eriogonum latifolium","Eriophyllum staechadifolium – Erigeron glaucus – Eriogonum latifolium","Eriogonum spp. / Poa secunda","Eriogonum spp. / Poa secunda","Coleogyne ramosissima","Coleogyne ramosissima","Artemisia tridentata","Artemisia tridentata","Artemisia tridentata ssp. vaseyana","Artemisia tridentata ssp. vaseyana","Artemisia cana","Artemisia cana","Ericameria nauseosa","Ericameria nauseosa","Atriplex canescens","Atriplex canescens","Sarcobatus vermiculatus","Sarcobatus vermiculatus","Sarcobatus vermiculatus","Lotus scoparius – Lupinus albifrons – Eriodictyon spp.","Lotus scoparius – Lupinus albifrons – Eriodictyon spp.","Arctostaphylos (canescens, manzanita, stanfordiana)","Arctostaphylos (canescens, manzanita, stanfordiana)","Ericameria linearifolia – Cleome isomeris","Ericameria linearifolia – Cleome isomeris","Distichlis spicata [inactive]","Distichlis spicata [inactive]","Festuca idahoensis – Danthonia californica","Festuca idahoensis – Danthonia californica","Festuca idahoensis – Danthonia californica","Centaurea (virgata)","Centaurea (virgata)","Carex nigricans","Carex nigricans","Carex lasiocarpa","Carex lasiocarpa","Carex limosa [inactive]","Carex limosa [inactive]","Eleocharis (acicularis, macrostachya) [inactive]","Eleocharis (acicularis, macrostachya) [inactive]","Vaccinium cespitosum","Vaccinium cespitosum","Carex (utriculata, vesicaria) [inactive]","Carex (utriculata, vesicaria) [inactive]","Nuphar spp. – Potamogeton spp. – Lemna spp. Freshwater Aquatic [inactive]","Nuphar spp. – Potamogeton spp. – Lemna spp. Freshwater Aquatic [inactive]","Nuphar spp. – Potamogeton spp. – Lemna spp. Freshwater Aquatic [inactive]","Lepidium latifolium – Lactuca serriola","Lepidium latifolium – Lactuca serriola","Populus tremuloides","Populus tremuloides","Populus fremontii – Fraxinus velutina – Salix gooddingii","Populus fremontii – Fraxinus velutina – Salix gooddingii","Salix lasiolepis","Salix lasiolepis","Salix exigua","Salix exigua","Alnus rhombifolia","Alnus rhombifolia","Acer macrophyllum – Alnus rubra [pending]","Acer macrophyllum – Alnus rubra [pending]","Acer macrophyllum – Alnus rubra [pending]","Celtis laevigata var. reticulata – Rhus trilobata","Celtis laevigata var. reticulata – Rhus trilobata","Juglans hindsii and Hybrids","Juglans hindsii and Hybrids","Rubus spectabilis – Morella californica","Rubus spectabilis – Morella californica","Quercus garryana (tree)","Quercus garryana (tree)","Umbellularia californica","Umbellularia californica","Umbellularia californica","Cercocarpus montanus","Cercocarpus montanus","Chamaecyparis lawsoniana","Chamaecyparis lawsoniana","Callitropsis nootkatensis","Callitropsis nootkatensis","Picea engelmannii","Picea engelmannii","Picea sitchensis","Picea sitchensis","Picea sitchensis","Tsuga mertensiana","Tsuga mertensiana","Tsuga heterophylla","Tsuga heterophylla","Tsuga heterophylla","Pinus contorta ssp. murrayana","Pinus contorta ssp. murrayana","Pinus monticola","Pinus monticola","Pinus lambertiana","Pinus lambertiana","Abies magnifica","Abies magnifica"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>CaCode<\/th>\n      <th>CaCode_norm<\/th>\n      <th>2009/NVC_Code<\/th>\n      <th>NVC_norm<\/th>\n      <th>ScientificName<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"autoWidth":true,"columnDefs":[{"className":"dt-left","targets":[0,4]},{"className":"dt-center","targets":[1,2,3]}],"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<button class="btn btn-primary" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,Q2FDb2RlO0NhQ29kZV9ub3JtOzIwMDkvTlZDX0NvZGU7TlZDX25vcm07U2NpZW50aWZpY05hbWUKMjEuMzEwLjAwOzIxLjMxMC4wMDtBMTYxNDthMTYxNDtFcmlvcGh5bGx1bSBzdGFlY2hhZGlmb2xpdW0g4oCTIEVyaWdlcm9uIGdsYXVjdXMg4oCTIEVyaW9nb251bSBsYXRpZm9saXVtCjIxLjMxMC4wMDsyMS4zMTAuMDA7QTA4MjI7YTA4MjI7RXJpb3BoeWxsdW0gc3RhZWNoYWRpZm9saXVtIOKAkyBFcmlnZXJvbiBnbGF1Y3VzIOKAkyBFcmlvZ29udW0gbGF0aWZvbGl1bQozMi4wMzcuMDA7MzIuMDM3LjAwO0ExNTY4O2ExNTY4O0VyaW9nb251bSBzcHAuIC8gUG9hIHNlY3VuZGEKMzIuMDM3LjAwOzMyLjAzNy4wMDtBMTEwNzthMTEwNztFcmlvZ29udW0gc3BwLiAvIFBvYSBzZWN1bmRhCjMzLjAyMC4wMDszMy4wMjAuMDA7QTMxNDQ7YTMxNDQ7Q29sZW9neW5lIHJhbW9zaXNzaW1hCjMzLjAyMC4wMDszMy4wMjAuMDA7QTMyMjA7YTMyMjA7Q29sZW9neW5lIHJhbW9zaXNzaW1hCjM1LjExMC4wMDszNS4xMTAuMDA7QTMxOTg7YTMxOTg7QXJ0ZW1pc2lhIHRyaWRlbnRhdGEKMzUuMTEwLjAwOzM1LjExMC4wMDtBMzE5NDthMzE5NDtBcnRlbWlzaWEgdHJpZGVudGF0YQozNS4xMTEuMDA7MzUuMTExLjAwO0EzMjA4O2EzMjA4O0FydGVtaXNpYSB0cmlkZW50YXRhIHNzcC4gdmFzZXlhbmEKMzUuMTExLjAwOzM1LjExMS4wMDtBMzIwNzthMzIwNztBcnRlbWlzaWEgdHJpZGVudGF0YSBzc3AuIHZhc2V5YW5hCjM1LjE1MC4wMDszNS4xNTAuMDA7QTI1NTc7YTI1NTc7QXJ0ZW1pc2lhIGNhbmEKMzUuMTUwLjAwOzM1LjE1MC4wMDtBMzIwMDthMzIwMDtBcnRlbWlzaWEgY2FuYQozNS4zMTAuMDA7MzUuMzEwLjAwO0EzMTk2O2EzMTk2O0VyaWNhbWVyaWEgbmF1c2Vvc2EKMzUuMzEwLjAwOzM1LjMxMC4wMDtBMzI2NjthMzI2NjtFcmljYW1lcmlhIG5hdXNlb3NhCjM2LjMxMC4wMDszNi4zMTAuMDA7QTA4Njk7YTA4Njk7QXRyaXBsZXggY2FuZXNjZW5zCjM2LjMxMC4wMDszNi4zMTAuMDA7QTMyNjY7YTMyNjY7QXRyaXBsZXggY2FuZXNjZW5zCjM2LjQwMC4wMDszNi40MDAuMDA7QTI1MDc7YTI1MDc7U2FyY29iYXR1cyB2ZXJtaWN1bGF0dXMKMzYuNDAwLjAwOzM2LjQwMC4wMDtBMTA0NjthMTA0NjtTYXJjb2JhdHVzIHZlcm1pY3VsYXR1cwozNi40MDAuMDA7MzYuNDAwLjAwO0EwODM0O2EwODM0O1NhcmNvYmF0dXMgdmVybWljdWxhdHVzCjM3LjA3MC4wMDszNy4wNzAuMDA7QTM4ODY7YTM4ODY7TG90dXMgc2NvcGFyaXVzIOKAkyBMdXBpbnVzIGFsYmlmcm9ucyDigJMgRXJpb2RpY3R5b24gc3BwLgozNy4wNzAuMDA7MzcuMDcwLjAwO0EyNjcyO2EyNjcyO0xvdHVzIHNjb3Bhcml1cyDigJMgTHVwaW51cyBhbGJpZnJvbnMg4oCTIEVyaW9kaWN0eW9uIHNwcC4KMzcuMzIzLjAwOzM3LjMyMy4wMDtBMzg1OTthMzg1OTtBcmN0b3N0YXBoeWxvcyAoY2FuZXNjZW5zLCBtYW56YW5pdGEsIHN0YW5mb3JkaWFuYSkKMzcuMzIzLjAwOzM3LjMyMy4wMDtBMzg2NTthMzg2NTtBcmN0b3N0YXBoeWxvcyAoY2FuZXNjZW5zLCBtYW56YW5pdGEsIHN0YW5mb3JkaWFuYSkKMzguMTI1LjAwOzM4LjEyNS4wMDtBNDAyMzthNDAyMztFcmljYW1lcmlhIGxpbmVhcmlmb2xpYSDigJMgQ2xlb21lIGlzb21lcmlzCjM4LjEyNS4wMDszOC4xMjUuMDA7QTQxMDE7YTQxMDE7RXJpY2FtZXJpYSBsaW5lYXJpZm9saWEg4oCTIENsZW9tZSBpc29tZXJpcwo0MS4yMDAuMDA7NDEuMjAwLjAwO0ExMzMyO2ExMzMyO0Rpc3RpY2hsaXMgc3BpY2F0YSBbaW5hY3RpdmVdCjQxLjIwMC4wMDs0MS4yMDAuMDA7QTM5MDA7YTM5MDA7RGlzdGljaGxpcyBzcGljYXRhIFtpbmFjdGl2ZV0KNDEuMjUxLjAwOzQxLjI1MS4wMDtBMzg5OTthMzg5OTtGZXN0dWNhIGlkYWhvZW5zaXMg4oCTIERhbnRob25pYSBjYWxpZm9ybmljYQo0MS4yNTEuMDA7NDEuMjUxLjAwO0EzNzM5O2EzNzM5O0Zlc3R1Y2EgaWRhaG9lbnNpcyDigJMgRGFudGhvbmlhIGNhbGlmb3JuaWNhCjQxLjI1MS4wMDs0MS4yNTEuMDA7QTQyMTA7YTQyMTA7RmVzdHVjYSBpZGFob2Vuc2lzIOKAkyBEYW50aG9uaWEgY2FsaWZvcm5pY2EKNDIuMDQzLjAwOzQyLjA0My4wMDtBMzg3MjthMzg3MjtDZW50YXVyZWEgKHZpcmdhdGEpCjQyLjA0My4wMDs0Mi4wNDMuMDA7QTMyNTU7YTMyNTU7Q2VudGF1cmVhICh2aXJnYXRhKQo0NS4xNjQuMDA7NDUuMTY0LjAwO0EzODMyO2EzODMyO0NhcmV4IG5pZ3JpY2Fucwo0NS4xNjQuMDA7NDUuMTY0LjAwO0EyNTE0O2EyNTE0O0NhcmV4IG5pZ3JpY2Fucwo0NS4xNjYuMDA7NDUuMTY2LjAwO0EzNDM3O2EzNDM3O0NhcmV4IGxhc2lvY2FycGEKNDUuMTY2LjAwOzQ1LjE2Ni4wMDtBMzU5OTthMzU5OTtDYXJleCBsYXNpb2NhcnBhCjQ1LjE3OC4wMDs0NS4xNzguMDA7QTM0MzU7YTM0MzU7Q2FyZXggbGltb3NhIFtpbmFjdGl2ZV0KNDUuMTc4LjAwOzQ1LjE3OC4wMDtBMzgwNjthMzgwNjtDYXJleCBsaW1vc2EgW2luYWN0aXZlXQo0NS4yMzIuMDA7NDUuMjMyLjAwO0EzODA3O2EzODA3O0VsZW9jaGFyaXMgKGFjaWN1bGFyaXMsIG1hY3Jvc3RhY2h5YSkgW2luYWN0aXZlXQo0NS4yMzIuMDA7NDUuMjMyLjAwO0EzODkxO2EzODkxO0VsZW9jaGFyaXMgKGFjaWN1bGFyaXMsIG1hY3Jvc3RhY2h5YSkgW2luYWN0aXZlXQo0NS40MDUuMDA7NDUuNDA1LjAwO0EzMzY0O2EzMzY0O1ZhY2Npbml1bSBjZXNwaXRvc3VtCjQ1LjQwNS4wMDs0NS40MDUuMDA7QTM4MzE7YTM4MzE7VmFjY2luaXVtIGNlc3BpdG9zdW0KNTIuMTIxLjAwOzUyLjEyMS4wMDtBMzgwNDthMzgwNDtDYXJleCAodXRyaWN1bGF0YSwgdmVzaWNhcmlhKSBbaW5hY3RpdmVdCjUyLjEyMS4wMDs1Mi4xMjEuMDA7QTM4MDU7YTM4MDU7Q2FyZXggKHV0cmljdWxhdGEsIHZlc2ljYXJpYSkgW2luYWN0aXZlXQo1Mi4xMjQuMDA7NTIuMTI0LjAwO0EzOTI2O2EzOTI2O051cGhhciBzcHAuIOKAkyBQb3RhbW9nZXRvbiBzcHAuIOKAkyBMZW1uYSBzcHAuIEZyZXNod2F0ZXIgQXF1YXRpYyBbaW5hY3RpdmVdCjUyLjEyNC4wMDs1Mi4xMjQuMDA7QTE3NDc7YTE3NDc7TnVwaGFyIHNwcC4g4oCTIFBvdGFtb2dldG9uIHNwcC4g4oCTIExlbW5hIHNwcC4gRnJlc2h3YXRlciBBcXVhdGljIFtpbmFjdGl2ZV0KNTIuMTI0LjAwOzUyLjEyNC4wMDtBMzkyNzthMzkyNztOdXBoYXIgc3BwLiDigJMgUG90YW1vZ2V0b24gc3BwLiDigJMgTGVtbmEgc3BwLiBGcmVzaHdhdGVyIEFxdWF0aWMgW2luYWN0aXZlXQo1Mi4yMDUuMDA7NTIuMjA1LjAwO0EzODQ5O2EzODQ5O0xlcGlkaXVtIGxhdGlmb2xpdW0g4oCTIExhY3R1Y2Egc2VycmlvbGEKNTIuMjA1LjAwOzUyLjIwNS4wMDtBMzI1NTthMzI1NTtMZXBpZGl1bSBsYXRpZm9saXVtIOKAkyBMYWN0dWNhIHNlcnJpb2xhCjYxLjExMS4wMDs2MS4xMTEuMDA7QTM3NjA7YTM3NjA7UG9wdWx1cyB0cmVtdWxvaWRlcwo2MS4xMTEuMDA7NjEuMTExLjAwO0EyMDM2O2EyMDM2O1BvcHVsdXMgdHJlbXVsb2lkZXMKNjEuMTMwLjAwOzYxLjEzMC4wMDtBMDY0NDthMDY0NDtQb3B1bHVzIGZyZW1vbnRpaSDigJMgRnJheGludXMgdmVsdXRpbmEg4oCTIFNhbGl4IGdvb2RkaW5naWkKNjEuMTMwLjAwOzYxLjEzMC4wMDtBMzgwMzthMzgwMztQb3B1bHVzIGZyZW1vbnRpaSDigJMgRnJheGludXMgdmVsdXRpbmEg4oCTIFNhbGl4IGdvb2RkaW5naWkKNjEuMjAxLjAwOzYxLjIwMS4wMDtBMDk3NzthMDk3NztTYWxpeCBsYXNpb2xlcGlzCjYxLjIwMS4wMDs2MS4yMDEuMDA7QTM4Nzg7YTM4Nzg7U2FsaXggbGFzaW9sZXBpcwo2MS4yMDkuMDA7NjEuMjA5LjAwO0EwOTQ3O2EwOTQ3O1NhbGl4IGV4aWd1YQo2MS4yMDkuMDA7NjEuMjA5LjAwO0EzODAwO2EzODAwO1NhbGl4IGV4aWd1YQo2MS40MjAuMDA7NjEuNDIwLjAwO0EzNzc3O2EzNzc3O0FsbnVzIHJob21iaWZvbGlhCjYxLjQyMC4wMDs2MS40MjAuMDA7QTAzMDY7YTAzMDY7QWxudXMgcmhvbWJpZm9saWEKNjEuNDYwLjAwOzYxLjQ2MC4wMDtBMDQyNzthMDQyNztBY2VyIG1hY3JvcGh5bGx1bSDigJMgQWxudXMgcnVicmEgW3BlbmRpbmddCjYxLjQ2MC4wMDs2MS40NjAuMDA7QTM3NTM7YTM3NTM7QWNlciBtYWNyb3BoeWxsdW0g4oCTIEFsbnVzIHJ1YnJhIFtwZW5kaW5nXQo2MS40NjAuMDA7NjEuNDYwLjAwO0EzNzQ1O2EzNzQ1O0FjZXIgbWFjcm9waHlsbHVtIOKAkyBBbG51cyBydWJyYSBbcGVuZGluZ10KNjEuNTY1LjAwOzYxLjU2NS4wMDtBMzk3MzthMzk3MztDZWx0aXMgbGFldmlnYXRhIHZhci4gcmV0aWN1bGF0YSDigJMgUmh1cyB0cmlsb2JhdGEKNjEuNTY1LjAwOzYxLjU2NS4wMDtBMTAzMzthMTAzMztDZWx0aXMgbGFldmlnYXRhIHZhci4gcmV0aWN1bGF0YSDigJMgUmh1cyB0cmlsb2JhdGEKNjEuODEwLjAwOzYxLjgxMC4wMDtBMzc1MDthMzc1MDtKdWdsYW5zIGhpbmRzaWkgYW5kIEh5YnJpZHMKNjEuODEwLjAwOzYxLjgxMC4wMDtBMDYxODthMDYxODtKdWdsYW5zIGhpbmRzaWkgYW5kIEh5YnJpZHMKNjMuOTEwLjAwOzYzLjkxMC4wMDtBMjYwOTthMjYwOTtSdWJ1cyBzcGVjdGFiaWxpcyDigJMgTW9yZWxsYSBjYWxpZm9ybmljYQo2My45MTAuMDA7NjMuOTEwLjAwO0EwODM2O2EwODM2O1J1YnVzIHNwZWN0YWJpbGlzIOKAkyBNb3JlbGxhIGNhbGlmb3JuaWNhCjcxLjAzMC4wMDs3MS4wMzAuMDA7QTMzMjc7YTMzMjc7UXVlcmN1cyBnYXJyeWFuYSAodHJlZSkKNzEuMDMwLjAwOzcxLjAzMC4wMDtBMzMyODthMzMyODtRdWVyY3VzIGdhcnJ5YW5hICh0cmVlKQo3NC4xMDAuMDA7NzQuMTAwLjAwO0EzMzQ2O2EzMzQ2O1VtYmVsbHVsYXJpYSBjYWxpZm9ybmljYQo3NC4xMDAuMDA7NzQuMTAwLjAwO0EwMTA2O2EwMTA2O1VtYmVsbHVsYXJpYSBjYWxpZm9ybmljYQo3NC4xMDAuMDA7NzQuMTAwLjAwO0EzNzUwO2EzNzUwO1VtYmVsbHVsYXJpYSBjYWxpZm9ybmljYQo3Ni4xMDAuMDA7NzYuMTAwLjAwO0EwNTg3O2EwNTg3O0NlcmNvY2FycHVzIG1vbnRhbnVzCjc2LjEwMC4wMDs3Ni4xMDAuMDA7QTM3OTI7YTM3OTI7Q2VyY29jYXJwdXMgbW9udGFudXMKODEuMTAwLjAwOzgxLjEwMC4wMDtBMzYwNjthMzYwNjtDaGFtYWVjeXBhcmlzIGxhd3NvbmlhbmEKODEuMTAwLjAwOzgxLjEwMC4wMDtBMDEwNDthMDEwNDtDaGFtYWVjeXBhcmlzIGxhd3NvbmlhbmEKODEuMjAwLjAwOzgxLjIwMC4wMDtBMzcyODthMzcyODtDYWxsaXRyb3BzaXMgbm9vdGthdGVuc2lzCjgxLjIwMC4wMDs4MS4yMDAuMDA7QTM3Mjc7YTM3Mjc7Q2FsbGl0cm9wc2lzIG5vb3RrYXRlbnNpcwo4My4xMDAuMDA7ODMuMTAwLjAwO0EzNzU3O2EzNzU3O1BpY2VhIGVuZ2VsbWFubmlpCjgzLjEwMC4wMDs4My4xMDAuMDA7QTM2MTQ7YTM2MTQ7UGljZWEgZW5nZWxtYW5uaWkKODMuMjAwLjAwOzgzLjIwMC4wMDtBMzYwODthMzYwODtQaWNlYSBzaXRjaGVuc2lzCjgzLjIwMC4wMDs4My4yMDAuMDA7QTM2MDc7YTM2MDc7UGljZWEgc2l0Y2hlbnNpcwo4My4yMDAuMDA7ODMuMjAwLjAwO0EzNjA0O2EzNjA0O1BpY2VhIHNpdGNoZW5zaXMKODQuMTAwLjAwOzg0LjEwMC4wMDtBMzYyMDthMzYyMDtUc3VnYSBtZXJ0ZW5zaWFuYQo4NC4xMDAuMDA7ODQuMTAwLjAwO0EzNjE3O2EzNjE3O1RzdWdhIG1lcnRlbnNpYW5hCjg0LjIwMC4wMDs4NC4yMDAuMDA7QTMzNzg7YTMzNzg7VHN1Z2EgaGV0ZXJvcGh5bGxhCjg0LjIwMC4wMDs4NC4yMDAuMDA7QTMzNzk7YTMzNzk7VHN1Z2EgaGV0ZXJvcGh5bGxhCjg0LjIwMC4wMDs4NC4yMDAuMDA7QTMzNzc7YTMzNzc7VHN1Z2EgaGV0ZXJvcGh5bGxhCjg3LjA4MC4wMDs4Ny4wODAuMDA7QTM3NTg7YTM3NTg7UGludXMgY29udG9ydGEgc3NwLiBtdXJyYXlhbmEKODcuMDgwLjAwOzg3LjA4MC4wMDtBMzYyMTthMzYyMTtQaW51cyBjb250b3J0YSBzc3AuIG11cnJheWFuYQo4Ny4xNzAuMDA7ODcuMTcwLjAwO0EzNjIwO2EzNjIwO1BpbnVzIG1vbnRpY29sYQo4Ny4xNzAuMDA7ODcuMTcwLjAwO0EzNjIyO2EzNjIyO1BpbnVzIG1vbnRpY29sYQo4Ny4yMDYuMDA7ODcuMjA2LjAwO0EzNjczO2EzNjczO1BpbnVzIGxhbWJlcnRpYW5hCjg3LjIwNi4wMDs4Ny4yMDYuMDA7QTM2NzI7YTM2NzI7UGludXMgbGFtYmVydGlhbmEKODguMjAwLjAwOzg4LjIwMC4wMDtBMzY3ODthMzY3ODtBYmllcyBtYWduaWZpY2EKODguMjAwLjAwOzg4LjIwMC4wMDtBMzYxOTthMzYxOTtBYmllcyBtYWduaWZpY2EK');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'cacaode_duplicates.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() => {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  " path="cdfw_cacode_duplicate_mapings.csv" has_icon="TRUE"><i class="fa fa-download"></i> Download Duplicated CaCode Mappings as CSV</button>
</div>
</div>
</section>
</section>
<section id="strata-cover-taxonomy" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="strata-cover-taxonomy"><span class="header-section-number">7</span> Strata, Cover, Taxonomy</h2>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stratacover_taxon_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! 5629 rows have NA values for `user_py_code`. A person and role are required for the taxon interpretations loader table.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! 12114 rows have NA `pc_code` (required for ingest).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample unmapped USDA codes:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 2MOSS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 2BRY</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• SNAG</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• POACEA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ASTERA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• CARYOP</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• HALORA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• POLYGO</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• BRASSI</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 2FORB</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• APIACE</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ERJE2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• 2JMELGO</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• DYBO</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• SEGR4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing two output files to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/strataCoverLT.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/taxonInterpretationsLT.csv</code></pre>
</div>
</div>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stratadefinitions_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some proj_code values from plotsLT.csv did not match RAProjects.csv ProjectCode (6 codes).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample missing proj_code values:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• CPVC</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• EBRP</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• CARR</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• HETH</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• CEQA_WRFB</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• OWVA-Recon</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using https://api-dev.vegbank.org as base URL</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! 3 proj_code values did not map to a VegBank stratum method (sm_code).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample proj_code with missing sm_code:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• DEVA-DelFavero</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• SAMO</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• SNI</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! 7661 strata rows have NA vb_sy_code (cannot ingest those strata definitions).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sample strata_id with missing vb_sy_code:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA139_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA170_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA174_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA175_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA190_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA203_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA205_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA209_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA229_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA240_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA329_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA388_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA403_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA443_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ANZA447_NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing output file to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/strataDefinitionsLT.csv</code></pre>
</div>
</div>
<section id="data-sources-and-merging-2" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="data-sources-and-merging-2"><span class="header-section-number">7.1</span> Data Sources and Merging</h3>
<p>Plant species data and vegetration strata are extracted from <code>RAPlants.csv</code> files, while project-level stratum methodology descriptions are from <code>RAProjects.csv</code> files. Each unique combination of <code>SurveyID</code> and stratum layer (<code>Stratum</code>) creates a distinct stratum identifier (i.e., <code>ALCC001_Shrub</code>). The data is processed to create two interconnected loader tables: one for strata cover (species abundance by vegetation layer) and one for taxonomic interpretations (linking species names to standardized plant concepts).</p>
</section>
<section id="person-assignment-for-taxonomic-interpretations" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="person-assignment-for-taxonomic-interpretations"><span class="header-section-number">7.2</span> Person Assignment for Taxonomic Interpretations</h3>
<p>Each plant observation requires attribution to a person who made the taxonomic identification. To assign a person, all people listed under the project are joined to an observation. Then, the person who seems most likely to have made the classification according to their listed role is assigned to the record, and other personnel are dropped. The system prioritizes contributor roles in the following order to determine the most appropriate person (along with the associated AR code):</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7b063f77620043c59642" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7b063f77620043c59642">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["ar.55","ar.34","ar.18","ar.38","ar.16","ar.51","ar.36","ar.53","ar.19","ar.50","ar.40","ar.17","ar.54","ar.56","ar.39","ar.43","ar.44","ar.48","ar.45","ar.46","ar.47"],["Taxonomist","Classifier","PI","Co-PI","Author","Publication author","Plot author","Research advisor","Data Manager","Plot contributor","Consultant","Contact","System manager","Data aggregator","Computer (automated)","Field assistant","Guide","Passive observer","Land owner","Not specified","Not specified/Unknown"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>ar_code<\/th>\n      <th>role_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"autoWidth":true,"scrollX":true,"columnDefs":[],"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="plant-concept-matching" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="plant-concept-matching"><span class="header-section-number">7.3</span> Plant Concept Matching</h3>
<p>All plant concepts are downloaded from the VegBank API and cached locally. The matching process prioritizes USDA Plants reference lists, with preference given to the most recent version when a plant code appears in multiple lists.</p>
<p>If <code>CurrPlantsSymbol</code> (current USDA Plants symbol) is available, it is used to match to the USDA codes in vegbank. If not available, <code>CodeSpecies</code> is used. Similarly, <code>SpeciesName</code> takes precedence over <code>Species_name</code> for scientific names.</p>
<p>Normalized USDA plant codes are matched to VegBank plant concept codes (<code>pc_code</code>) through the plant concept database. Records without successful matches (missing <code>pc_code</code>) are flagged via warning messages, as plant concept codes are required for VegBank ingest.</p>
</section>
<section id="strata-identification-and-standardization" class="level3" data-number="7.4">
<h3 data-number="7.4" class="anchored" data-anchor-id="strata-identification-and-standardization"><span class="header-section-number">7.4</span> Strata Identification and Standardization</h3>
<p>Each plant observation is assigned a unique stratum identifier by concatenating the survey ID (<code>SurveyID</code>) and stratum layer (<code>Stratum</code>). This links individual plant records to their vertical position in the vegetation structure (tree layer, shrub layer, herb layer, etc.)</p>
<p>Stratum names are normalized to lowercase and corrected based on project-specific rules to ensure consistency with VegBank stratum methods. The following lookup table is applied to determine which of the available vegbank methods best fits the project.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>method_lookup <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(in_dir, <span class="st">"lookup-tables/CDFW-strata-method.csv"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(proj_code, stratum_method_name, Notes)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  method_lookup,</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">filter =</span> <span class="st">"top"</span>,</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">25</span>)</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8687d5807c173661abb3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8687d5807c173661abb3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["ALCC","ALCC-GR","ALSC","ANZA","AWSF","CAMO-VegMap","CANO","CARR","CAVA","CDLO","CEQA_BRVC","CEQA_SWNC","CEQA_WRFB","CHOC","COYO","CPVC","CVPA","CVPAA","CVRP","CZPOF","CZPOFL","DEDW","DEVA-DelFavero","DEVA-Slaton","DEVA-Springs","DFGRF","DOLO","DRECP","EBAY","EBRP","EBRP-GR","EDGW","ELDO","FISH","FNWS","HETH","ISMT","JAWB","JAWB-Recon","JOMU","KNOX","LLNL","LOMA","MARIN","MDEI_Central","MOJA-Evens","MOJA-McAuliffe","MOJA-NRCS","MOJA-VegMap","MOJD","MOJDchap","MOLA","OAKG","OWVA","OWVA-Recon","PIME","PINN","PSMA","PTAR","PVPLC","PWPOF","PYGM","QHQ","SACT","SAMO","SASU","SBVWCD","SCLAR","SCLR","SCR","SCRUZ","SCRUZL","SDG","SEKI","SFVW","SJV","SLAV","SMAT","SNC-LARMB","SNC-MidPen","SNFN","SNI","SONO","SPCC","SSNF","SVRA","TEHA","WLKR","WRIV","WSD",null],["CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","NVC Standard 2004","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","National Park Service","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","National Park Service","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW RA v. 2005","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS/CDFW v.2010","CNPS RA 2007","CNPS/CDFW v.2010","CNPS/CDFW v.2010"],["project uses \"nv\" instead of \"non-vasc\" but they mean the same thing. Does that still work?","project uses \"nv\" instead of \"non-vasc\" but they mean the same thing. Does that still work?","","Best existing fit is 'NVC Standard 2004' though this one is lacking 'NA'.","","","","","","","","","","","","","","","","","","","no good fit that I can tell","","","","","Rosie review: There's some funky things in this one. Not sure what 'typha do' and 'hj' are. Without those (and NA), CNPS/CDFW v.2010 is best fit.","CNPS/CDFW v.2010 works for all the spelled out strata. ","","","","","","","","","Covers everything but snag","","","","","","Covers everything but NA","Covers everything but NA","Covers everything but NA","Covers everything but NA","","Covers everything but NA","","","Covers everything but NA","","","","Covers everything but NA","","","","Covers everything but NA","","","","","Not sure about this one","","","Not sure why all forms of each strata are listed but CNPS/CDFW v.2010 covers all the categories except NA","Covers everything but the NA","Covers everything but the NA","Also includes \"shrubs\".","","Not sure why all forms of each strata are listed but CNPS/CDFW v.2010 covers all the categories except NA","","","","Covers everything but the NA. Some misspellings in these. ","","","","","Not sure about this one","","","","","","","Covers everything but the NA","Covers everything but the NA",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>proj_code<\/th>\n      <th>stratum_method_name<\/th>\n      <th>Notes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Based on the above, minor corrections were made to the projects and strata below.</p>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-33d7d074c5a67e615fb7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-33d7d074c5a67e615fb7">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["ALCC","ALCC-GR","SCRUZ","SLAV","SLAV","SLAV"],["nv","nv","shrubs","shrubs","shrutb","shsrub"],["non-vasc","non-vasc","shrub","shrub","shrub","shrub"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Project Code<\/th>\n      <th>Original Stratum<\/th>\n      <th>Corrected Stratum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"autoWidth":true,"scrollX":true,"columnDefs":[],"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Three loader tables are generated:</p>
<ol type="1">
<li><strong>Strata Cover Data</strong> (<code>strataCoverLT.csv</code>) contains species abundance information, including the plant name as recorded by the author and the cover percentage.</li>
<li><strong>Strata Definitions Data</strong> (<code>strataDefinitionsLT.csv</code>) links to the survey observation and stratum definition.</li>
<li><strong>Taxon Interpretations</strong> (<code>taxonInterpretationsLT.csv</code>) links author-recorded plant names to standardized VegBank plant concept codes, includes attribution to the person who made the identification, and marks both <code>original_interpretation</code> and <code>current_interpretation</code> as TRUE since these represent the initial taxonomic determinations.</li>
</ol>
</section>
</section>
<section id="new-community-concepts" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="new-community-concepts"><span class="header-section-number">8</span> New Community Concepts</h2>
<p>Documentation will be written…</p>
<div class="cell styled-output">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">community_definitions_loader</span>(in_dir, out_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some MVC level values were not recognized (comm_level set to NA):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Special Stands</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! Some rows are missing an Alliance/Association level (11 rows).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Filtered MCV rows: 3202 -&gt; 1623 (kept CaCodes present in RAClassification).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Writing two output files to:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/communityConceptsLT.csv</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• ../data/loader-tables/communityNamesLT.csv</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>